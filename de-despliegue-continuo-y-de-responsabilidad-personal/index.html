<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="es-ES">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="es-ES">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="es-ES">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>De despliegue continuo y de responsabilidad personal | Lógica Alternativa</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://localhost/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; RSS de los comentarios" href="/comments/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.26"}};
			!function(t,a,e){var r,n,i,o=a.createElement("canvas"),l=o.getContext&&o.getContext("2d");function c(t){var e=a.createElement("script");e.src=t,e.defer=e.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(e)}for(i=Array("flag","emoji4"),e.supports={everything:!0,everythingExceptFlag:!0},n=0;n<i.length;n++)e.supports[i[n]]=function(t){var e,a=String.fromCharCode;if(!l||!l.fillText)return!1;switch(l.clearRect(0,0,o.width,o.height),l.textBaseline="top",l.font="600 32px Arial",t){case"flag":return(l.fillText(a(55356,56826,55356,56819),0,0),o.toDataURL().length<3e3)?!1:(l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,57331,65039,8205,55356,57096),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,57331,55356,57096),0,0),e!==o.toDataURL());case"emoji4":return l.fillText(a(55357,56425,55356,57341,8205,55357,56507),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55357,56425,55356,57341,55357,56507),0,0),e!==o.toDataURL()}return!1}(i[n]),e.supports.everything=e.supports.everything&&e.supports[i[n]],"flag"!==i[n]&&(e.supports.everythingExceptFlag=e.supports.everythingExceptFlag&&e.supports[i[n]]);e.supports.everythingExceptFlag=e.supports.everythingExceptFlag&&!e.supports.flag,e.DOMReady=!1,e.readyCallback=function(){e.DOMReady=!0},e.supports.everything||(r=function(){e.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1)):(t.attachEvent("onload",r),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&e.readyCallback()})),(r=e.source||{}).concatemoji?c(r.concatemoji):r.wpemoji&&r.twemoji&&(c(r.twemoji),c(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='cptch_stylesheet-css'  href='/wp-content/plugins/captcha/css/front_end_style.css?ver=4.3.6' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='/wp-includes/css/dashicons.min.css?ver=4.7.26' type='text/css' media='all' />
<link rel='stylesheet' id='cptch_desktop_style-css'  href='/wp-content/plugins/captcha/css/desktop_style.css?ver=4.3.6' type='text/css' media='all' />
<link rel='stylesheet' id='st-widget-css'  href='/wp-content/plugins/share-this/css/style.css?ver=4.7.26' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='/wp-content/themes/twentytwelve/style.css?ver=4.7.26' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://localhost/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<link rel='prev' title='Dar valor a los tweets: Interés, difusión, audiencia,&#8230; trasteando con el API de Twitter' href='/tweets-interes-difusion-audiencia-trasteando-api-twiter/' />
<link rel='next' title='Configuración de entornos flexible en Spring utilizando SpEL' href='/configuracion-de-entornos-flexible-en-spring-utilizando-spel/' />
<meta name="generator" content="WordPress 4.7.26" />
<link rel="canonical" href="/de-despliegue-continuo-y-de-responsabilidad-personal/" />
<link rel='shortlink' href='/?p=489' />
<link rel="alternate" type="application/json+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fde-despliegue-continuo-y-de-responsabilidad-personal%2F" />
<link rel="alternate" type="text/xml+oembed" href="/wp-json/oembed/1.0/embed?url=http%3A%2F%2F%2Fde-despliegue-continuo-y-de-responsabilidad-personal%2F&#038;format=xml" />

<!-- Bad Behavior 2.2.20 run time: 3.270 ms -->
<script type="text/javascript">
<!--
function bb2_addLoadEvent(func) {
	var oldonload = window.onload;
	if (typeof window.onload != 'function') {
		window.onload = func;
	} else {
		window.onload = function() {
			oldonload();
			func();
		}
	}
}

bb2_addLoadEvent(function() {
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1685262049 127.0.0.1';
			document.forms[i].appendChild(myElement);
		}
	}
});
// --></script>
		<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.2.6'></script>
<script language="JavaScript"><!--
 var DevFmtUrl='http://localhost/wp-content/plugins/devformatter/'; var DevFmtAjaxUrl = 'http://localhost/wp-admin/admin-ajax.php'; //-->
</script>
<script type='text/javascript' src='/wp-content/plugins/devformatter/devfmt_common.js?ver=2015.0.2.1'></script>
<script type='text/javascript' src='/wp-content/plugins/devformatter/devfmt_public.js?ver=2015.0.2.1'></script>
<style type="text/css" media="screen"> @import url( '/wp-content/plugins/devformatter/devfmt_reset.css?ver=2015.0.2.1' ); </style>
<style type="text/css" media="screen"> @import url( '/wp-content/plugins/devformatter/devfmt_css.php?ver=2015.0.2.1' ); </style><script charset="utf-8" type="text/javascript">var switchTo5x=true;</script><script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript">stLight.options({publisher:'wp.08e04e90-ba64-4016-a864-853c9c560eca'});var st_type='wordpress3.5.1';</script></head>

<body class="post-template-default single single-post postid-489 single-format-standard custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="/" title="Lógica Alternativa" rel="home">Lógica Alternativa</a></h1>
			<h2 class="site-description">&#039;¿Otro blog de informática? &#8230; Todavía no&#039; .- Cuaderno de bitácora de Miguel R. Esteban</h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menú</button>
			<a class="assistive-text" href="#content" title="Ir al contenido">Ir al contenido</a>
			<div class="nav-menu"><ul>
<li ><a href="/">Inicio</a></li><li class="page_item page-item-30"><a href="/mi-cv/">Mi CV</a></li>
<li class="page_item page-item-122"><a href="/mapa-del-sitio/">Mapa del sitio</a></li>
</ul></div>
		</nav><!-- #site-navigation -->

				<a href="/"><img src="/wp-content/uploads/2013/04/cabecera3.jpg" class="header-image" width="960" height="250" alt="Lógica Alternativa" /></a>
			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<div id="primary" class="site-content">
		<div id="content" role="main">

			
				
	<article id="post-489" class="post-489 post type-post status-publish format-standard hentry category-java tag-despliegue-continuo tag-java tag-jenkins tag-junit tag-maven">
				<header class="entry-header">
			
						<h1 class="entry-title">De despliegue continuo y de responsabilidad personal</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<h1>Despliegue continuo con Jenkins, Maven, Selenium y Junit</h1>
<p>Están surgiendo nuevos conceptos como el <strong>despliegue continuo</strong> y la <strong>responsabilidad personal</strong> que están cambiando la forma de desplegar en un entorno de producción.</p>
<p>Digamos que la “manera tradicional” es decidir que funcionalidades van a ir en cada versión codificarlas, probar esa versión y por fin el despliegue en producción. Quién se haya enfrentado a esto sabe el estrés que produce el despliegue de una nueva versión sobre todo si conlleva bastantes cambios, &#8230;si ya sabemos que todo está probado, que no va a pasar nada, pero el mal trago del despliegue no te lo quita nadie … <em>“¿irá todo bien? ¿no irá?</em>”</p>
<h2>Despliegue continuo</h2>
<p>¿Cómo están haciendo las cosas empresas como Facebook? … pues simplemente <strong>no hay versiones</strong>.<span id="more-489"></span> Básicamente todo lo que se sube al repositorio de código es desplegado en producción. Claro está, que es un poco más sofisticado que esto. La idea es que cada &#8216;<em>push</em>&#8216; o &#8216;<em>merge</em>&#8216; que se haga en una determinada branch del repositorio se despliegue en “producción”. Pero ese <em>commit</em> está &#8216;controlado&#8217; por las <strong>pruebas unitarias</strong> y de <strong>integración</strong> y además el que lo realiza es consciente de que ese cambio se va a reflejar en producción.</p>
<p>El flujo de lo que quiero expresar es el siguiente:</p>
<p><div id="attachment_493" style="width: 335px" class="wp-caption alignleft"><img class="size-full wp-image-493" alt="[Flujo de despliegue continuo]" src="/wp-content/uploads/2013/11/kkkk_DesplieueContinuo_p.png" width="325" height="391" srcset="/wp-content/uploads/2013/11/kkkk_DesplieueContinuo_p.png 325w, /wp-content/uploads/2013/11/kkkk_DesplieueContinuo_p-249x300.png 249w" sizes="(max-width: 325px) 100vw, 325px" /><p class="wp-caption-text">[Flujo de despliegue continuo]</p></div>Ese despliegue se puede realizar en una primera instancia a un número limitado de usuarios de la aplicación. En Facebook esta puesta en producción con la nueva funcionalidad se realiza en un número limitado de servidores (y por tanto de usuarios) y si todo va bien se propaga al resto de servidores.</p>
<p>El <strong>despliegue continuo no es integración continua</strong>. Es quizás llevar este concepto un paso más allá. Obliga a trabajar de manera diferente. Se basa en que se puedan hacer varios despliegues por semana e incluso varios por día. Es más sencillo trabajar con historias de usuario lo más pequeñas posibles y por tanto desarrollos pequeños, para que puedan adaptarse a este concepto. Además obliga a generar los test de la nueva funcionalidad que va en cada despliegue.</p>
<p>Todo esto no significa que vaya en contra de un entorno de integración y los procesos de integración continua. Como intentaré explicar más adelante en el <strong>ejemplo</strong>, con la misma configuración y jugando con los<strong> perfiles de Maven</strong> y las tareas de <strong>Jenkins</strong>, en un proyecto&nbsp; podrían coexistir un entorno de integración apuntando a una rama de código y otro de producción apuntando a su propia rama. En integración subirían las funcionalidades realizadas por los diferentes desarrolladores y que se probarían en su conjunto y desde esta se haría &#8216;<em>push</em>&#8216; a la de producción cuando se den por validos.</p>
<h2>Ventajas</h2>
<p>Las ventajas son varias:</p>
<ul>
<li>Se pierde el miedo a los despliegues.&nbsp; Hay que tener en cuenta que en sistemas replicados y distribuidos el despliegue se realiza sin que el usuario perciba que el servicio está caído por lo que se pueden hacer en caliente.</li>
<li>Está todo más controlado, hay menos desorden. Los cambios están muchos más localizados, si algo falla se acota donde se ha producido el error.</li>
<li>Se simplifica todo. No hay versiones y por tanto no hay equívocos. Lo que está en la rama de producción es lo que está desplegado en producción.</li>
<li>Finalmente las funcionalidades que ya están completas se suben a inmediatamente a producción y el usuario puede utilizarlas antes.</li>
</ul>
<h2>Responsabilidad personal</h2>
<p>En el despliegue continuo, y sobre todo en grupos pequeños de trabajo, cada desarrollador es responsable de su commit y de su pequeño despliegue. Ahí es donde entra el concepto de la responsabilidad personal. Eres directamente responsable de esa parte que se ha subido a producción. Por eso tienes que poner cuidado en codificar el código y las pruebas para que no genere bugs.</p>
<p>Esto en Facebook lo llevan al extremo otorgando una especie de &#8216;<em>karma</em>&#8216;. Si el &#8216;<em>karma</em>&#8216; del desarrollador es alto (vamos si es confiable y su código no ha producido errores) se confía en su <em>commit</em>. Si es &#8216;<em>karma</em>&#8216; es bajo, su código es revisado y probado por otros técnicos antes de que se despliegue. El desarrollador no conoce el valor de su karma&#8230; ¿excesivo?&#8230; A mi modo ver si que lo es un poco.</p>
<h2>Test si o si</h2>
<p>Son la red de seguridad en este tipo de despliegue por lo que son esenciales. <a title=" Unlce Bob Martin (cleancoder.com) " href="http://www.cleancoder.com/" target="_blank">Uncle Bob Martin</a> remarca la importancia de hacer primero el test antes que el código. No es una correspondencia biunívoca, del test se puede obtener el código pero no del código se puede obtener el test. El mero hecho de hacer el test primero condiciona a que tu código sea testable, cosa que es difícil al revés.</p>
<p>Se puede ser más pragmático en lo referente a los test, pero en este tipo de despliegue no hay duda de que son necesarios. Lo que si es cierto es que montar infraestructura de test no debería ser un desarrollo en si mismo. Lo más sensato es no inventar la rueda y basarse en estándares y herramientas que ya nos dan esta funcionalidad .</p>
<h2>El ejemplo</h2>
<p>El ejemplo está basado en un proyecto Java tiene la siguientes características:</p>
<ul>
<li>Es un proyecto web &#8216;Hola Mundo&#8217; hecho en Java Server Faces</li>
<li>Tiene la estructura de proyecto <strong>Maven</strong> y se utilizará esta herramienta para la construcción, pruebas y despliegue.</li>
<li>Se utiliza <strong>Junit</strong> para las pruebas unitarias.</li>
<li><strong>Jetty</strong> (embebido en el plugin de Maven) para desplegar el entorno de pruebas para poder lazar las pruebas de integración.</li>
<li>Se utiliza <strong>Selenium</strong> para las pruebas de integración</li>
<li>Por último se ha supuesto que el despliegue en producción se haría en&nbsp; un <strong>Tomcat 7</strong></li>
<li>Se utiliza <strong>Jenkins</strong> como herramienta de despliegue continuo, se configurará para que se lance Maven siempre que haya un cambio en el repositorio.</li>
</ul>
<p>Lo que quiero es mostrar un ejemplo práctico, que contenga una prueba unitaria, otra de integración, y que en su proceso de construcción estén todos los pasos desde la compilación, hasta el despliegue final, mostrar como se refleja todo esto en la configuración del proyecto Maven (<em>pom.xml</em>) y como se configuraría Jenkins.</p>
<p>El código está disponible en <strong>github</strong>:</p>
<p style="text-align: center;"><a href="https://github.com/logicaalternativa/EjemDespliegueCont" target="_blank"><img class="size-full wp-image-432 alignnone" alt="" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" width="32" height="32" /><strong>EjemDespliegueCont</strong></a></p>
<h3>Proyecto y clases</h3>
<p>Como ejemplo de proyecto he utilizado un HolaMundo echo en <strong>Java Server Faces</strong>. Tiene un controlador <a title="HolaMundo.java" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/src/main/java/com/logicaalternativa/ejemplos/desplieguecontinuo/HolaMundo.java" target="_blank">HolaMundo.java</a>&nbsp; y después se ha creado una prueba unitaria en <strong>Junit</strong> <a title="HolaMundoTest.java" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/src/test/java/com/logicaalternativa/ejemplos/desplieguecontinuo/HolaMundoTest.java" target="_blank">HolaMundoTest.java</a>&nbsp; y una prueba de integración en <strong>Selenium</strong> <a title="HolaMundoTestIT.java" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/src/test/java/com/logicaalternativa/ejemplos/desplieguecontinuo/HolaMundoTestIT.java" target="_blank">HolaMundoIT.java</a> . Las tres clases son muy sencillas pero sirven para explicar el concepto.</p>
<h3>Pom (Maven)</h3>
<p>Es el <a title="pom.xml" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/pom.xml" target="_blank">pom.xml</a> donde se define los plugin que se van a usar y como se va a montar el entorno que nos permita realizar el flujo indicado más arriba.&nbsp; Lo explico un poco por encima, de todas maneras he insertado comentarios que explican cada paso.</p>
<p>He configurado el plugin &#8216;<em>jetty-maven-plugin</em>&#8216; para que se arranque un servidor <strong>jetty</strong> con la aplicación desplegada en la fase &#8216;<em>pre-integration-tes</em>t&#8217; y se pare en la fase de &#8216;<em>post-integration-test</em>&#8216;. Esto nos permitirá lanzar los test de integración contra un entorno ya desplegado.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>org.mortbay.jetty<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>jetty-maven-plugin<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>8.1.13.v20130916<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;scanIntervalSeconds<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>10<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/scanIntervalSeconds<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;stopKey<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>foo<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/stopKey<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;stopPort<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>9999<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/stopPort<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>start-jetty<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;phase<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>pre-integration-test<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/phase<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">     <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>run<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">19</td><td class="devcodelinesarea"><pre class="devcode devcodeline">     <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;scanIntervalSeconds<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>0<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/scanIntervalSeconds<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">20</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">     <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;daemon<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>true<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/daemon<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">21</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">22</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">23</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">24</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>stop-jetty<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">25</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;phase<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>post-integration-test<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/phase<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">26</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">27</td><td class="devcodelinesarea"><pre class="devcode devcodeline">     <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>stop<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">28</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">29</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">30</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">31</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">32</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p style="text-align: center;"><strong>Código 01</strong>. (<a title="pom.xml" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/pom.xml" target="_blank">pom.xml</a>) Configuración del plugin jetty embebido</p>
<p>Por otro lado he configurado el&nbsp; plugin &#8216;<em>maven-failsafe-plugin</em>&#8216; que lanza los test de integración para que se lance en la fase de &#8216;<em>integration-test</em>&#8216;.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>maven-failsafe-plugin<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>2.16<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>integration-test<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>verify<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p style="text-align: center;"><strong>Código 02</strong>. (<a title="pom.xml" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/pom.xml" target="_blank">pom.xml</a>) Configuración de plugin del test de integración</p>
<p>Este plugin lanzará todos los test que terminen el *IT.java. Por eso no es casual el nombre del test de <strong>Selenium</strong>&nbsp; <a title="HolaMundoTestIT.java" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/src/test/java/com/logicaalternativa/ejemplos/desplieguecontinuo/HolaMundoTestIT.java" target="_blank">HolaMundoIT.java</a></p>
<p>Por último he configurado el plugin &#8216;<em>maven-antrun-plugin</em>&#8216; para que lance un &#8216;<strong>ant</strong>&#8216; en la fase &#8216;<em>install</em>&#8216; que despliegue la aplicación en un entorno final en un <strong>Tomcat</strong> o en varios.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>org.apache.maven.plugins<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>maven-antrun-plugin<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>1.7<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;target<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;ant</span> <span style="color: #000066;">antfile</span>=<span style="color: #ff0000;">&quot;src/main/ant/deployTomcat.xml&quot;</span> <span style="color: #000066;">inheritrefs</span>=<span style="color: #ff0000;">&quot;true&quot;</span> <span style="color: #000066;">inheritAll</span>=<span style="color: #ff0000;">&quot;true&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;property</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;project.build.finalName&quot;</span> <span style="color: #000066;">value</span>=<span style="color: #ff0000;">&quot;${project.build.finalName}&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/ant<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/target<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>                     </pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/configuration<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #808080; font-style: italic;">&lt;!-- Dependencias para las task de despliegue de tomcat --&gt;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dependencies<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;dependency<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>org.apache.tomcat<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/groupId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>tomcat-catalina-ant<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/artifactId<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>7.0.42<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/version<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">19</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dependency<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">20</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/dependencies<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">21</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">22</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">23</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>install-tomcat<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">24</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;phase<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>install<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/phase<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">25</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">26</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>run<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goal<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">27</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/goals<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">28</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/execution<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">29</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/executions<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">30</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/plugin<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">31</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p style="text-align: center;"><strong>Código 03</strong>. (<a title="pom.xml" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/pom.xml" target="_blank">Pom.xm</a>l) Configuración del ant de despliegue del tomcat en la fase install</p>
<p>El ant que ejecuta es &#8216;<a title="deployTomcat.xml" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/src/main/ant/deployTomcat.xml" target="_blank">deployTomcat.xml</a>&#8216;. Como se puede ver si están definidas las propiedades &#8216;<em>tomcat.servidor1</em>&#8216; y &#8216;<em>tomcat.servidor2</em>&#8216;, se ejecutarían los targets &#8216;<em>deployServer1</em>&#8216; y &#8216;<em>deployServer2</em>&#8216; respectivamente.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;target</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;deployServer&quot;</span> <span style="color: #000066;">depends</span>=<span style="color: #ff0000;">&quot;deployServer1, deployServer2&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>    </pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;target</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;deployServer1&quot;</span> <span style="color: #000066;">if</span>=<span style="color: #ff0000;">&quot;tomcat.servidor1&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;deploy</span> <span style="color: #000066;">url</span>=<span style="color: #ff0000;">&quot;http://${tomcat.servidor1}/manager/text&quot;</span> </span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">  <span style="color: #000066;">username</span>=<span style="color: #ff0000;">&quot;${tomcat.usuario}&quot;</span> </span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">  <span style="color: #000066;">password</span>=<span style="color: #ff0000;">&quot;${tomcat.contrasena}&quot;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">  <span style="color: #000066;">path</span>=<span style="color: #ff0000;">&quot;/${project.build.finalName}&quot;</span> </span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">  <span style="color: #000066;">war</span>=<span style="color: #ff0000;">&quot;file:${project.build.directory}/${project.build.finalName}.${project.packaging}&quot;</span> <span style="color: #000066;">update</span>=<span style="color: #ff0000;">&quot;true&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/target<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;target</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;deployServer2&quot;</span> <span style="color: #000066;">if</span>=<span style="color: #ff0000;">&quot;tomcat.servidor2&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;deploy</span> <span style="color: #000066;">url</span>=<span style="color: #ff0000;">&quot;http://${tomcat.servidor1}/manager/text&quot;</span> </span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">  <span style="color: #000066;">username</span>=<span style="color: #ff0000;">&quot;${tomcat.usuario}&quot;</span> </span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">  <span style="color: #000066;">password</span>=<span style="color: #ff0000;">&quot;${tomcat.contrasena}&quot;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">    <span style="color: #000066;">path</span>=<span style="color: #ff0000;">&quot;/${project.build.finalName}&quot;</span> </span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">    <span style="color: #000066;">war</span>=<span style="color: #ff0000;">&quot;file:${project.build.directory}/${project.build.finalName}.${project.packaging}&quot;</span> <span style="color: #000066;">update</span>=<span style="color: #ff0000;">&quot;true&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span>                    </pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/target<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p style="text-align: center;"><strong>Código 04</strong>. (<a title="deployTomcat.xml" href="https://github.com/logicaalternativa/EjemDespliegueCont/blob/master/src/main/ant/deployTomcat.xml" target="_blank">deployTomcat.xml</a>) Definición de los target de despliegue</p>
<h3>Perfiles de maven</h3>
<p>Definiendo estas variables en diferentes perfiles de maven se puede jugar si en la fase &#8216;<em>install</em>&#8216; no se despliega en el Tomcat (si no se definen ninguna de las dos propiedades)&nbsp; o en uno sólo (definiendo sólo una) o en los dos (definiendo las dos propiedades) y cuales son sus direcciones. Con el mismo <em>pom.xml</em> y ant se puede desplegar en diferentes entornos (Por ejemplo &#8216;<em>desarrollo</em>&#8216; &#8216;<em>preproduccion</em>&#8216;,&#8217;<em>produccion</em>,&#8230;)</p>
<p>Pongo un ejemplo de los perfiles que he definido para este ejemplo. Se añaden en el archivo &#8216;<em>settings.xml</em>&#8216; del directorio &#8216;<em>.m2</em>&#8216; del home del usuario que lanza el maven.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;profiles<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;profile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>desarrollo<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;properties<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.usuario<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>tomcat<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.usuario<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.contrasena<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>tomcat<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.contrasena<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.servidor1<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>127.0.0.1:8080<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.servidor1<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/properties<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>  </pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/profile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;profile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>produccion<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/id<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;properties<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.usuario<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>tomcat<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.usuario<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.contrasena<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>tomcat<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.contrasena<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.servidor1<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>127.0.0.1:8080<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.servidor1<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat.servidor2<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>10.2.0.15:8080<span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat.servidor2<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">19</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/properties<span style="color: #000000; font-weight: bold;">&gt;</span></span></span>  </pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">20</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/profile<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">21</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">22</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/profiles<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines" width="3%">23</td><td class="devcodelinesarea"><pre class="devcode devcodeline">....</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p style="text-align: center;"><strong>Código 05</strong>.(settings.xml de maven) Configuración de perfiles</p>
<p style="text-align: left;">En los perfiles también se definen el <strong>usuario del Tomcat</strong> que nos permite desplegar aplicaciones a través de la red.</p>
<h3>Configuración del tomcat</h3>
<p>Hay que <strong>dar de alta un usuario</strong> en el Tomcat del despliegue de&nbsp; &#8216;producción&#8217; para que permita desplegar una aplicación por la red. Esto se configura en el archivo &#8216;<em>conf/tomcat-users.xml</em>&#8216;</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;tomcat-users<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;role</span> <span style="color: #000066;">rolename</span>=<span style="color: #ff0000;">&quot;manager&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">4</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;role</span> <span style="color: #000066;">rolename</span>=<span style="color: #ff0000;">&quot;manager-gui&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">5</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;role</span> <span style="color: #000066;">rolename</span>=<span style="color: #ff0000;">&quot;manager-script&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">6</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;role</span> <span style="color: #000066;">rolename</span>=<span style="color: #ff0000;">&quot;admin&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">7</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;user</span> <span style="color: #000066;">username</span>=<span style="color: #ff0000;">&quot;tomcat&quot;</span> <span style="color: #000066;">password</span>=<span style="color: #ff0000;">&quot;tomcat&quot;</span> <span style="color: #000066;">roles</span>=<span style="color: #ff0000;">&quot;manager,manager-gui,admin,manager-script&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">8</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...  </pre></td></tr><tr><td class="devcodelines" width="3%">9</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/tomcat-users<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p style="text-align: center;"><strong>Código 06</strong>. (tomcat-users.xml) Configuración del tomcat.</p>
<p>Se añade el usuario &#8216;<em>tomcat</em>&#8216; con el perfil &#8216;<em>manager&minus;script</em>&#8216;</p>
<h3>Job de Jenkins<a href="/wp-content/uploads/2013/11/pantallazo0.png"><img class="alignright size-full wp-image-513" alt="Pantallazo. Job de jenkins" src="/wp-content/uploads/2013/11/pantallazo0.png" width="250" height="161" /></a></h3>
<p>Ya sólo queda configurar el job del jenkins para que lance el proyecto maven cada vez que haya un cambio en la rama del repositorio. He elegido un proyecto maven que mire en el repositorio cada cierto tiempo. Esta es la configuración del repositorio de código:</p>
<div id="attachment_510" style="width: 660px" class="wp-caption aligncenter"><img class="size-full wp-image-510" alt="Pantallazo. Configuración del repositorio de versiones del job de jenkins " src="/wp-content/uploads/2013/11/pantallazo1.png" width="650" height="324" srcset="/wp-content/uploads/2013/11/pantallazo1.png 650w, /wp-content/uploads/2013/11/pantallazo1-300x149.png 300w, /wp-content/uploads/2013/11/pantallazo1-624x311.png 624w" sizes="(max-width: 650px) 100vw, 650px" /><p class="wp-caption-text">Pantallazo. Configuración del repositorio de versiones del job de jenkins</p></div>
<p>Donde para el ejemplo lo he apuntado directamente a github. Se indican también los <strong>goal</strong> de maven indicando el <strong>puerto</strong> donde se arrancará el <strong>jetty</strong> de pruebas y el <strong>perfil</strong> que se va a usar:</p>
<div id="attachment_512" style="width: 660px" class="wp-caption aligncenter"><img class="size-full wp-image-512" alt="Pantallazo. Definición de los goal y de los perfiles de maven" src="/wp-content/uploads/2013/11/pantallazo2.png" width="650" height="124" srcset="/wp-content/uploads/2013/11/pantallazo2.png 650w, /wp-content/uploads/2013/11/pantallazo2-300x57.png 300w, /wp-content/uploads/2013/11/pantallazo2-624x119.png 624w" sizes="(max-width: 650px) 100vw, 650px" /><p class="wp-caption-text">Pantallazo. Definición de los goal y de los perfiles de maven</p></div>
<h2>Conclusiones</h2>
<p>Como se puede ver fácilmente con herramientas estándar como <strong>maven</strong>, <strong>ant</strong>, <strong>junit</strong>, <strong>selenium</strong>&nbsp; y <strong>jenkins</strong> se puede montar un entorno que nos permita realizar un despliegue continuo. Queda sólo cambiar la mentalidad y atreverse a dar el paso en un entorno de producción.</p>
<p>Espero que os sirva.</p>
<p><a title="Mi CV" href="/mi-cv/">M.E.</a></p>
<p>PD: La inspiración de este articulo me la dio la charla de Alex Fernandez en MadridJS sobre despliegue continuo</p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a> y está etiquetada con <a href="/tag/despliegue-continuo/" rel="tag">despliegue continuo</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/jenkins/" rel="tag">jenkins</a>, <a href="/tag/junit/" rel="tag">junit</a>, <a href="/tag/maven/" rel="tag">maven</a> en <a href="/de-despliegue-continuo-y-de-responsabilidad-personal/" title="20:38" rel="bookmark"><time class="entry-date" datetime="2013-11-17T20:38:51+00:00">17 noviembre, 2013</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

				<nav class="nav-single">
					<h3 class="assistive-text">Navegación de entradas</h3>
					<span class="nav-previous"><a href="/tweets-interes-difusion-audiencia-trasteando-api-twiter/" rel="prev"><span class="meta-nav">&larr;</span> Dar valor a los tweets: Interés, difusión, audiencia,&#8230; trasteando con el API de Twitter</a></span>
					<span class="nav-next"><a href="/configuracion-de-entornos-flexible-en-spring-utilizando-spel/" rel="next">Configuración de entornos flexible en Spring utilizando SpEL <span class="meta-nav">&rarr;</span></a></span>
				</nav><!-- .nav-single -->

				
<div id="comments" class="comments-area">

	
	
	
</div><!-- #comments .comments-area -->
			
		</div><!-- #content -->
	</div><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="text-3" class="widget widget_text">			<div class="textwidget"><a href="/feed/" title="Suscribirse a este sitio usando RSS 2.0"><img class="alignnone" alt="[RSS]" src="/wp-content/uploads/2013/04/rss_copy.png" width="20" height="20" /></a>&nbsp;&nbsp;<a href="/feed/" title="Suscribirse a este sitio usando RSS 2.0"><abbr title="Really Simple Syndication">RSS</abbr> de las entradas</a></div>
		</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Entradas recientes</h3>		<ul>
					<li>
				<a href="/charla-commit-conf-2023-sobre-programacion-funcional-y-patrones-funcionales/">Charla Commit Conf 2023 sobre programación funcional y patrones funcionales</a>
						</li>
					<li>
				<a href="/notas-sobre-aprendizaje-por-refuerzo/">Notas sobre aprendizaje por refuerzo</a>
						</li>
					<li>
				<a href="/diapositivas-de-la-charla-de-commit-conf/">Vídeo y diapositivas de la charla de Commit Conf</a>
						</li>
					<li>
				<a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/">Futuros y promesas,&#8230; y también monadas. Implementando el patrón</a>
						</li>
					<li>
				<a href="/akka-por-ejemplos-actores-tipados/">Actores tipados, Akka por ejemplos</a>
						</li>
				</ul>
		</aside>		<aside id="text-2" class="widget widget_text"><h3 class="widget-title">Sobre el autor</h3>			<div class="textwidget"><a href="/mi-cv"><a href="/mi-cv/#imagenMiCV"><img class="alignright" alt="[Sobre el autor]" src="/wp-content/uploads/2013/04/miguel_p_90x82_claro.jpg" /></a>
<small>Mi nombre es Miguel Rafael Esteban Martín. Llevo más de 20 años trabajando como&nbsp;desarrollador&nbsp; y &nbsp;arquitecto&nbsp; de software en diferentes empresas, lenguajes de programación y plataformas.<br/>
En este blog hablaré sobre programación y tecnología e intentaré hacerlo de manera clara y amena.<br/>
Actualmente trabajando como programador de software en Darwinex.<br/>
Más sobre mi en el enlace <strong><a href="/mi-cv/#imagenMiCV">Mi CV</a></strong></small>

<p style="text-align: center;"><small><strong>Contacto</strong><br/>
<a href="/mi-cv/#email"><img class="alignnone" alt="[correo electrónico]" src="/wp-content/uploads/2013/04/e_mail_p.png" width="32" height="32" /></a><a href="http://es.linkedin.com/in/miguelresteban"><img class="size-full wp-image-25 alignnone" alt="[Perfil en LinkedIn]" src="/wp-content/uploads/2013/04/linkedin.png" width="32" height="32" /></a><a href="https://twitter.com/MiguelREsteban"><img class="size-full wp-image-25 alignnone" alt="[Perfil en Twitter]" src="/wp-content/uploads/2013/04/twitter.png" width="32" height="32" /></a><a href="https://github.com/logicaalternativa"><img class="size-full wp-image-25 alignnone" alt="[Perfil en GitHub]" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" width="32" height="32" /></a>
</small></p></div>
		</aside><aside id="text-8" class="widget widget_text">			<div class="textwidget"> <!-- De aquí -->
    <div id="twitter"></div>    
    <script type="text/javascript" src="/etc/ejemplos/php/twiter-api/js/carga-widget.js.php"></script>
    <!-- hasta aquí --></div>
		</aside><aside id="categories-4" class="widget widget_categories"><h3 class="widget-title">Categorías</h3>		<ul>
	<li class="cat-item cat-item-15"><a href="/category/programacion/android/" >Android</a>
</li>
	<li class="cat-item cat-item-36"><a href="/category/apis/" >APIs</a>
</li>
	<li class="cat-item cat-item-64"><a href="/category/control-de-la-configuracion/" >Control de la configuración</a>
</li>
	<li class="cat-item cat-item-57"><a href="/category/criptografia-y-certificados/" >Criptografía y certificados</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/general/" >General</a>
</li>
	<li class="cat-item cat-item-90"><a href="/category/inteligencia-artificial/" >Inteligencia artificial</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/programacion/java/" >Java</a>
</li>
	<li class="cat-item cat-item-8"><a href="/category/programacion/javascript/" >JavaScript</a>
</li>
	<li class="cat-item cat-item-21"><a href="/category/la-nube/" >La Nube</a>
</li>
	<li class="cat-item cat-item-87"><a href="/category/programacion/patrones/" >Patrones</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/programacion/php/" >PHP</a>
</li>
	<li class="cat-item cat-item-20"><a href="/category/programacion/" >Programación</a>
</li>
	<li class="cat-item cat-item-16"><a href="/category/sistemas-operativos/" >Sistemas operativos</a>
</li>
		</ul>
</aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
			<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es_ES"><img alt="Licencia de Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Lógica Alternativa</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.logicaalternativa.com/mi-cv/" property="cc:attributionName" rel="cc:attributionURL">Miguel Rafael Esteban Martín</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es_ES">Creative Commons Reconocimiento-NoComercial 3.0 Unported License</a>.		
			<!--
						<a href="https://wordpress.org/" title="Plataforma semántica de publicación personal">Creado con WordPress</a>
			-->
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='/wp-content/themes/twentytwelve/js/navigation.js?ver=20140711'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.7.26'></script>
</body>
</html>
