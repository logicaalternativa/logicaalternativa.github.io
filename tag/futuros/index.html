<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="es-ES">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="es-ES">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="es-ES">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>futuros | Lógica Alternativa</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://localhost/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; RSS de los comentarios" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; futuros RSS de la etiqueta" href="/tag/futuros/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.2.1\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.7.28"}};
			!function(t,a,e){var r,n,i,o=a.createElement("canvas"),l=o.getContext&&o.getContext("2d");function c(t){var e=a.createElement("script");e.src=t,e.defer=e.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(e)}for(i=Array("flag","emoji4"),e.supports={everything:!0,everythingExceptFlag:!0},n=0;n<i.length;n++)e.supports[i[n]]=function(t){var e,a=String.fromCharCode;if(!l||!l.fillText)return!1;switch(l.clearRect(0,0,o.width,o.height),l.textBaseline="top",l.font="600 32px Arial",t){case"flag":return(l.fillText(a(55356,56826,55356,56819),0,0),o.toDataURL().length<3e3)?!1:(l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,57331,65039,8205,55356,57096),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,57331,55356,57096),0,0),e!==o.toDataURL());case"emoji4":return l.fillText(a(55357,56425,55356,57341,8205,55357,56507),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55357,56425,55356,57341,55357,56507),0,0),e!==o.toDataURL()}return!1}(i[n]),e.supports.everything=e.supports.everything&&e.supports[i[n]],"flag"!==i[n]&&(e.supports.everythingExceptFlag=e.supports.everythingExceptFlag&&e.supports[i[n]]);e.supports.everythingExceptFlag=e.supports.everythingExceptFlag&&!e.supports.flag,e.DOMReady=!1,e.readyCallback=function(){e.DOMReady=!0},e.supports.everything||(r=function(){e.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1)):(t.attachEvent("onload",r),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&e.readyCallback()})),(r=e.source||{}).concatemoji?c(r.concatemoji):r.wpemoji&&r.twemoji&&(c(r.twemoji),c(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='cptch_stylesheet-css'  href='/wp-content/plugins/captcha/css/front_end_style.css?ver=4.3.6' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='/wp-includes/css/dashicons.min.css?ver=4.7.28' type='text/css' media='all' />
<link rel='stylesheet' id='cptch_desktop_style-css'  href='/wp-content/plugins/captcha/css/desktop_style.css?ver=4.3.6' type='text/css' media='all' />
<link rel='stylesheet' id='st-widget-css'  href='/wp-content/plugins/share-this/css/style.css?ver=4.7.28' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='/wp-content/themes/twentytwelve/style.css?ver=4.7.28' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://localhost/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.7.28" />

<!-- Bad Behavior 2.2.20 run time: 2.317 ms -->
<script type="text/javascript">
<!--
function bb2_addLoadEvent(func) {
	var oldonload = window.onload;
	if (typeof window.onload != 'function') {
		window.onload = func;
	} else {
		window.onload = function() {
			oldonload();
			func();
		}
	}
}

bb2_addLoadEvent(function() {
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1708548179 127.0.0.1';
			document.forms[i].appendChild(myElement);
		}
	}
});
// --></script>
		<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.2.6'></script>
<script language="JavaScript"><!--
 var DevFmtUrl='http://localhost/wp-content/plugins/devformatter/'; var DevFmtAjaxUrl = 'http://localhost/wp-admin/admin-ajax.php'; //-->
</script>
<script type='text/javascript' src='/wp-content/plugins/devformatter/devfmt_common.js?ver=2015.0.2.1'></script>
<script type='text/javascript' src='/wp-content/plugins/devformatter/devfmt_public.js?ver=2015.0.2.1'></script>
<style type="text/css" media="screen"> @import url( '/wp-content/plugins/devformatter/devfmt_reset.css?ver=2015.0.2.1' ); </style>
<style type="text/css" media="screen"> @import url( '/wp-content/plugins/devformatter/devfmt_css.php?ver=2015.0.2.1' ); </style><script charset="utf-8" type="text/javascript">var switchTo5x=true;</script><script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript">stLight.options({publisher:'wp.08e04e90-ba64-4016-a864-853c9c560eca'});var st_type='wordpress3.5.1';</script></head>

<body class="archive tag tag-futuros tag-83 custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="/" title="Lógica Alternativa" rel="home">Lógica Alternativa</a></h1>
			<h2 class="site-description">&#039;¿Otro blog de informática? &#8230; Todavía no&#039; .- Cuaderno de bitácora de Miguel R. Esteban</h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menú</button>
			<a class="assistive-text" href="#content" title="Ir al contenido">Ir al contenido</a>
			<div class="nav-menu"><ul>
<li ><a href="/">Inicio</a></li><li class="page_item page-item-30"><a href="/mi-cv/">Mi CV</a></li>
<li class="page_item page-item-122"><a href="/mapa-del-sitio/">Mapa del sitio</a></li>
</ul></div>
		</nav><!-- #site-navigation -->

				<a href="/"><img src="/wp-content/uploads/2013/04/cabecera3.jpg" class="header-image" width="960" height="250" alt="Lógica Alternativa" /></a>
			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<section id="primary" class="site-content">
		<div id="content" role="main">

					<header class="archive-header">
				<h1 class="archive-title">Archivo de la etiqueta: <span>futuros</span></h1>

						</header><!-- .archive-header -->

			
	<article id="post-1035" class="post-1035 post type-post status-publish format-standard hentry category-java category-patrones tag-futuros tag-java tag-patrones">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/" rel="bookmark">Futuros y promesas,&#8230; y también monadas. Implementando el patrón</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<blockquote><p><strong>«Los modelos NIO no bloqueantes y la programación asíncrona y reactiva son paradigmas que poco a poco van adoptándose y utilizando más</strong>.»</p></blockquote>
<p>Los modelos <em><strong>NIO</strong></em> no bloqueantes y la programación <strong>asíncrona</strong> y <strong>reactiva</strong> son paradigmas que poco a poco van adoptándose y utilizando más. No creo que diga una tontería al afirmar que muy probablemente serán la norma en un futuro cercano. La razón es clara: aunque no se obtiene un rendimiento mejor que los modelos tradicionales sincrónicos, si son modelos mucho <strong>más eficientes</strong>. Obtienen el mismo rendimiento con menos recursos al tener un mejor control de los hilos, uno de los recursos más preciados en un sistema operativo.</p>
<div style="width: 310px" class="wp-caption alignright"><img src="/wp-content/uploads/2017/08/future.png" alt="Futuros y promesas" width="300" height="252" /><p class="wp-caption-text">Futuros y promesas</p></div>
<p>Para poder articular una programación asíncrona y reactiva es necesario utilizar patrones adaptados a este tipo de programación. Puedes utilizar el patrón <strong>observable</strong> o las <strong>señales</strong>,  pero casi podríamos decir que tu camino te llevará irremisiblemente al patrón <strong>futuro</strong> en cuando tienes que integrar varios resultados asíncronos. Si además nuestra implementación del patrón futuros-promesas cumple con las propiedades de las <strong>monadas</strong> se nos abre un mudo de posibilidades. Con la programación funcional, la composición de futuros se podrá hacer de una manera elegante obteniendo un código más legible.</p>
<p>Esto permite realizar <strong>DSL&#8217;s</strong> (Domain Specific Language) y separar la lógica de negocio de los efectos de lado. Por ahora “<em>&#8230; ahí lo dejo</em>”; prefiero no perder foco en el objetivo de este artículo, pero en mi mente esta tratar todo esto en una nueva reseña. En este artículo entraré a desarrollar todos estos nuevos conceptos intentando desmitificarlos, porque al principio todo lo de “<em>Futuros</em>”, “<em>Promesas</em>” y “<em>Mónadas</em>” puede que suene “<em>muy místico</em>”. Lo haré apoyado en mi propia implementación del patrón Futuros y promesas que está disponible en mi GitHub.</p>
<p style="text-align: center;"><a href="https://github.com/logicaalternativa/AlternativeFuture" target="_blank" rel="noopener"><img class="alignnone wp-image-432 size-full" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" alt="[Logo GitHub]" width="32" height="32" /></a> <a href="https://github.com/logicaalternativa/AlternativeFuture" target="_blank" rel="noopener">AlternativeFuture</a></p>
<p>La implementación está basada “<em>fuertemente</em>” en el Api de Scala de futuros y sólo recordar que Akka en su versión de Java la exporta directamente y que además los futuros de Scala son también monadas. Cuando digo que me apoyo en el Api de Scala me refiero a seguir la definición de su contrato, de hecho, no me interesaba el código fuente y si hacer el ejercicio de, a partir de su interfaz, realizar mi propia implementación en Java. El código que podéis ver y utilizar es todo mio. Hecha esta aclaración es el momento de empezar a entrar en faena.</p>
<p>Intentaré hacer un acercamiento de dentro a fuera. Primero pondré el foco en las ideas principales para ir después abriendo el zoom y conseguir tener la imagen completa.</p>
<h2>Futuros</h2>
<p>«<em>¿Qué es un futuro?</em>» Pongámonos en contexto. Imaginemos dos procesos: uno será el principal que llamará a un método que devuelve un futuro de un valor. El otro será el que calcule realmente el valor de manera asíncrona ejecutado en un segundo plano con respecto al principal. Voy a poner un ejemplo para hacerlo más didáctico. <strong>A</strong>na (el hilo <strong>A</strong>, el principal) le dice a <strong>B</strong>artolo (el hilo <strong>B</strong>) que haga la colada (llamada al método)</p>
<div style="width: 610px" class="wp-caption aligncenter"><a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/futuresanabartolo-1/"><img src="/wp-content/uploads/2017/07/futuresAnaBartolo-1-e1502818196258.png" alt="Llamada asíncrona" width="600" height="344" /></a><p class="wp-caption-text">1. Llamada asíncrona</p></div>
<p>El proceso principal obtiene un futuro como resultado de llamar a un método que se lanzará en segundo plano gracias al hilo B. En el ejemplo<strong> B</strong>artolo manda una nota (representa el futuro) a <strong>A</strong>na que le permitirá apuntar lo  que se quiere que se haga con la colada cuando haya terminado <strong>B</strong>artolo. El hilo <strong>A</strong> no queda a la espera del resultado de la acción ejecutada por el hilo <strong>B</strong> y queda liberado para realizar otras operaciones. En el ejemplo <strong>A</strong>na no espera a que <strong>B</strong>artolo termine y  puede seguir haciendo otras tareas.</p>
<div style="width: 620px" class="wp-caption aligncenter"><a href="/futuresanabartolo-2/"><img src="/wp-content/uploads/2017/07/futuresAnaBartolo-2.png" alt="2. Se devuelve un futuro" width="610" height="350" /></a><p class="wp-caption-text">2. Se devuelve un futuro</p></div>
<p>Este futuro es en realidad un artefacto que permite asignar, desde el proceso principal una función <em>callback</em>. En el siguiente paso, <strong>A</strong>na decidirá que es lo que quiere hacer cuando termine la colada, es decir, asignará la función callback que se ejecutará cuando se obtenga el resultado del segundo proceso ejecutado por <strong>B</strong>artolo.</p>
<div style="width: 620px" class="wp-caption aligncenter"><a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/futuresanabartolo-3/"><img src="/wp-content/uploads/2017/07/futuresAnaBartolo-3.png" alt="Asignar callback" width="610" height="350" /></a><p class="wp-caption-text">3. Asignar callback</p></div>
<p>Cuando, gracias al segundo proceso, se haya calculado finalmente el valor, se ejecutará la función de regreso al que se le pasará como argumento el valor final obtenido. En el ejemplo tenemos la función «<em>planchar la ropa</em>» y el resultado del proceso: «<em>la ropa lavada»</em>.</p>
<div style="width: 620px" class="wp-caption aligncenter"><a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/futuresanabartolo-4/"><img src="/wp-content/uploads/2017/07/futuresAnaBartolo-4.png" alt="Resultado del futuro" width="610" height="350" /></a><p class="wp-caption-text">4. Resultado del futuro</p></div>
<h3>Contextos de ejecución</h3>
<p>La ejecución de las funciones callback con el valor final como argumento se hará dentro de lo que se llama un <strong>contexto de ejecución</strong>. Este no es más que un pool de hilos que permite <strong>independizar la ejecución</strong> de la función con el valor final tanto del hilo principal como del segundo proceso, es decir, se ejecutarán en un tercer hilo “<em>reutilizable</em>”. En el ejemplo que estamos siguiendo es <strong>C</strong>arlos (el hilo <strong>C</strong>) el que plancha la  ropa.</p>
<div style="width: 620px" class="wp-caption alignright"><a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/futuresanabartolo-5/"><img src="/wp-content/uploads/2017/07/futuresAnaBartolo-5.png" alt="Ejecución de la función callback con el valor del futuro" width="610" height="490" /></a><p class="wp-caption-text">Ejecución de la función callback con el valor del futuro</p></div>
<p>En la implementación del patrón que he propuesto a cada una de las funciones callback y de orden superior definidas en el interfaz futuro se le puede pasar un contexto de ejecución.</p>
<h2>Más cosas de los futuros</h2>
<p>A grandes rasgos, esta es la esencia: el futuro permite configurar desde la ejecución principal que hacer cuando finalmente exista el valor. Y se hace sin tener que bloquear hilos porque sino arruinamos la asincronía.</p>
<p>Teniendo esto en mente y sin perder de vista lo simple de este concepto, base de todo, voy a ir añadiendo nuevos conceptos e ideas que nos permitirá ir completando la visión general del patrón.</p>
<h3>Dos caminos</h3>
<p>Añadiendo una nueva capa a las funciones <em>callback</em>. El resultado de la ejecución de cualquier método puede ser, o bien su valor, o bien que su ejecución se haya saldado con un error, luego el resultado final que contiene un futuro puede ser:</p>
<ul>
<li>un valor correcto</li>
<li>o también una excepción.</li>
</ul>
<p>¿Por qué no contemplar esta circunstancia con dos caminos? Un camino para cuando el valor sea correcto con su correspondiente función <em>callback</em> (el método <strong><em>onSuccess</em></strong>) y otro que nos permita definir otra función de regreso cuando se produzca un error (el método <strong><em>onFailure</em></strong>)</p>
<hr />
<h4 style="padding-left: 90px;"><span style="color: #808080;">Signatura de un <strong><em>onSuccess</em></strong> y <strong><em>onFailure</em></strong> de <strong><em>AlternativeFuture[T]</em></strong>:</span></h4>
<h5 style="padding-left: 90px;"><span style="color: #808080;">onSuccess</span></h5>
<p><pre style="padding-left: 90px;"><span style="color: #808080;"><strong>void</strong> onSuccesful( final <strong>Consumer</strong>&lt;<strong>T</strong>&gt; function, final <strong>Executor</strong> executor );</span></pre></p>
<p style="padding-left: 90px;"><span style="color: #808080;">El argumento <strong><em>function</em></strong> es una función cuyo argumento es de tipo <strong><em>T</em></strong> (es el tipo del valor final del futuro) y resultado <strong><em>void</em></strong>.</span></p>
<p><pre style="padding-left: 90px;"><span style="color: #808080;">function: <strong>T</strong> =&gt; <strong>void</strong></span></pre></p>
<p style="padding-left: 90px;"><span style="color: #808080;">Esta será la función que se ejecutaría cuando de resultado final del futuro ha ido bien.</span></p>
<h5 style="padding-left: 90px;"><span style="color: #808080;">onFailure</span></h5>
<p><pre style="padding-left: 90px;"><span style="color: #808080;"><strong>void</strong> onFailure ( final <strong>Consumer</strong>&lt;<strong>Throwable</strong>&gt; function, final <strong>Executor</strong> executor );</span></pre></p>
<p style="padding-left: 90px;"><span style="color: #808080;">En este caso el argumento <strong><em>function</em></strong> es una función cuyo argumento es un Throwable (la excepción que se reportaría si se produciría un error) y resultado <em>void</em>.</span></p>
<p><pre style="padding-left: 90px;"><span style="color: #808080;">function: <strong>Throwable</strong> =&gt; <strong>void</strong></span></pre></p>
<p style="padding-left: 90px;"><span style="color: #333333;"><span style="color: #808080;">Está será la función que se ejecutará cuando el futuro se haya solventado con un error</span>.</span></p>
<hr style="padding-left: 60px;" />
<h3>¿Cuando se ejecuta la función callback?</h3>
<p>Para dar respuesta a esta pregunta nos debemos fijar en que existan las dos cosas necesarias para la ejecución de la función: que exista <strong>la función</strong> y que exista <strong>el valor</strong>. Hay entonces dos posibilidades:</p>
<ul>
<li>Puede que ya haya asignada una o varias funciones callback al futuro, entonces la ejecución de las mismas será cuando se obtenga el valor.</li>
<li>O bien puede ser que se obtenga primero el valor y el disparador de que la función se ejecute será la propia asignación de la función callback.</li>
</ul>
<p>Es importante tener en mente que un futuro (“barra” promesa, esto lo explicaré más adelante), sólo se le puede asignar el valor una vez, además otra característica es que una función callback sólo se ejecutará una vez. Sin embargo se puede asignar al futuro, a lo largo del tiempo, todas las funciones callback que se deseen.</p>
<h2>Promesas</h2>
<p>Si has llegado hasta aquí probablemente ya te habrá asaltado la duda: ¿Cómo se da valor al futuro? ¿Cómo se le asigna un valor? La respuesta: a través de la <strong><em>promesa</em></strong>.</p>
<p>Podemos decir que la promesa y el futuro son las dos caras de la misma moneda y que una promesa está relacionada con un futuro. La idea básica que debemos tener en mente es la siguiente:</p>
<ul>
<li>el futuro permite asignar la función callback para tomar decisiones una vez se haya obtenido el valor</li>
<li>la promesa permite dar valor a ese futuro.</li>
</ul>
<p>Si volvemos al ejemplo anterior, será más sencillo de entender. Si recordamos el proceso principal llamaba a un método que permite en un segundo proceso calcular un valor de manera asíncrona en un tiempo indeterminado (puede ser antes o después). Mientras que el <strong>proceso principal</strong> tiene como herramienta al<strong> interfaz futuro</strong> que le permite indicar que es lo que se debe de hacer una vez se haya calculado el valor,<strong> el interfaz de la promesa</strong> será el instrumento que poseé <strong> el segundo proceso</strong> encargado de calcular el valor para asignar el valor a ese futuro. En síntesis <strong>A</strong>na usaría el futuro y <strong>B</strong>artolo la promesa.</p>
<div style="width: 635px" class="wp-caption alignnone"><a href="/diagramadeactividadespromesasfuturo-2/"><img src="/wp-content/uploads/2017/08/diagramaDeactividadesPromesasFuturo-peque.png" alt="Diagrama de flujo Promesa-Futuro" width="625" height="432" /></a><p class="wp-caption-text">Diagrama de flujo Promesa-Futuro</p></div>
<div style="width: 808px" class="wp-caption aligncenter"><a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/sequenciapromesasfuturo/"><img src="/wp-content/uploads/2016/11/sequenciaPromesasFuturo.png" alt="Diagrama de secuencia Promesa-Futuro" width="798" height="472" /></a><p class="wp-caption-text">Diagrama de secuencia Promesa-Futuro</p></div>
<hr />
<h4 style="padding-left: 120px;"><span style="color: #808080;">Implementación</span></h4>
<p style="padding-left: 120px;"><span style="color: #808080;">Si echáis un vistazo al código, podéis observar que sólo existe una implementación que implementa las dos interfaces: la promesa y el futuro.</span></p>
<p style="padding-left: 120px;"><span style="color: #808080;">La clase <a href="https://github.com/logicaalternativa/AlternativeFuture/blob/master/src/main/java/com/logicaalternativa/futures/imp/AlternativePromiseImp.java" target="_blank" rel="noopener"><strong><em>AlternativePromiseImp</em></strong></a> tiene un atributo que permite almacenar el valor del futuro. Este se asignará gracias a los métodos que expone el interfaz promesa <strong><em><a href="https://github.com/logicaalternativa/AlternativeFuture/blob/master/src/main/java/com/logicaalternativa/futures/AlternativePromise.java" target="_blank" rel="noopener">AlternativePromise</a></em></strong>.</span></p>
<p style="padding-left: 120px;"><span style="color: #808080;">Existen dos atributos más en AlternativePromiseImp que son del tipo de cola FIFO (el primero que entra será el primero que sale). Permiten almacenar las funciones callback gracias a los métodos expuestos por el interfaz <a href="https://github.com/logicaalternativa/AlternativeFuture/blob/master/src/main/java/com/logicaalternativa/futures/AlternativeFuture.java" target="_blank" rel="noopener"><strong><em>AlternativeFuture</em></strong></a>.</span></p>
<p style="padding-left: 120px;"><span style="color: #808080;">Una de las colas guardará las funciones que se van a ejecutar cuando mediante la promesa relacionada se asigne un valor correcto al futuro. Las funciones se van añadiendo a esta cola utilizando el método &#8216;<em>onSuccesful</em>&#8216; del interfaz AlternativeFuture.</span></p>
<p style="padding-left: 120px;"><span style="color: #808080;">La otra cola FIFO almacenará las funciones callback que se ejecutarán cuando la promesa relacionada se resuelva con un error. De la misma manera, se van añadiendo estas las funciones gracias al método &#8216;<em>onFailure</em>&#8216; del interfaz AlternativeFuture.</span></p>
<p style="padding-left: 120px;"><span style="color: #808080;">Bien cuando se asigna un valor a la promesa o bien cuando se añade una función callback al futuro se comprueba que existan los requisitos necesarios (la función y el valor del futuro). Si es así se ejecutará las funciones callback incluidas en la cola de callbacks con el valor final. Según se vayan ejecutando las funciones se eliminarán de la cola.</span></p>
<hr />
<h2>El Futuro como mónada. Programación funcional con AlternativeFuture</h2>
<p>Se puede dar una vuelta de tuerca más y seguir añadiendo capas a la cebolla. El patrón Futuro/promesa permite adoptar un nuevo patrón funcional: la <strong>monada</strong>. Este artículo ya es lo suficientemente extenso, quizás con ya demasiados conceptos así que dejo pospuesto introducir la composición mónadica con AlternativeFuture y os emplazo a un siguiente post continuación de este.</p>
<p><a href="/mi-cv/"><strong><em>M.E.</em></strong></a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/patrones/" rel="category tag">Patrones</a> y está etiquetada con <a href="/tag/futuros/" rel="tag">futuros</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/patrones/" rel="tag">patrones</a> en <a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/" title="19:20" rel="bookmark"><time class="entry-date" datetime="2017-08-15T19:20:34+00:00">15 agosto, 2017</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-918" class="post-918 post type-post status-publish format-standard hentry category-java category-programacion tag-actores tag-akka tag-bus-de-eventos tag-futuros tag-java tag-programacion-reactiva tag-robustez">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/akka-por-ejemplos-sobre-supervision-bus-de-eventos/" rel="bookmark">Akka por ejemplos. Sobre supervisión, bus de eventos, &#8230;</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<blockquote><p><strong><span style="color: #808080;">Esta es la segunda entrega de Akka por ejemplos. La primera trató sobre cual es el funcionamiento de la cola de mensajes de un actor, que es un router y como se envían mensajes entre actores.</span></strong></p>
<p><strong><span style="color: #808080;">Ahora se tratarán temas como el control de fallos y la supervisión de actores, el bus de eventos de Akka y sobre los &#8216;Dead Letters&#8217;</span></strong></p>
<p style="text-align: right;"><em>Entrada anterior: <strong><a href="/akka-por-ejemplos/">Akka por ejemplos</a></strong></em></p>
</blockquote>
<p>Sin más vamos con los ejemplos.</p>
<p>Todo el código fuente relacionado con esta serie de posts está disponible en mi repositorio de <strong>GitHub</strong></p>
<p style="text-align: center;"><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures" target="_blank"><img class="alignnone wp-image-432 size-full" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" alt="[Logo GitHub]" width="32" height="32" /></a> <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures" target="_blank">AkkaActorsAndFutures</a></p>
<hr />
<h2>Control de fallos: Supervisión y monitorización.</h2>
<p><div id="attachment_930" style="width: 230px" class="wp-caption alignright"><a href="/wp-content/uploads/2015/10/supervision-peque.png"><img class="wp-image-930 size-full" src="/wp-content/uploads/2015/10/supervision-peque.png" alt="[Supervisión padre-hijo en Akka]" width="220" height="172" /></a><p class="wp-caption-text">[Supervisión padre-hijo en Akka]</p></div>En <strong><em>Akka</em></strong> la robustez a fallos se basa en la supervisión de actores con jerarquía padre-hijo. El actor que delega tareas en los actores que crea es el que &#8216;<em>supervisa</em>&#8216; y decide que hacer cuando se produce un fallo en alguno de sus hijos.</p>
<p>Se crea así una jerarquía en forma de árbol en la que la que los actores padres supervisan a los actores hijos. El actor &#8216;<em>user</em>&#8216; de <strong><em>Akka</em></strong> será el padre de primera generación de actores que hayamos creado.</p>
<p>Esto es realmente lo que te da la <strong>robustez</strong> (&#8216;<em>resilence</em>&#8216;)  que un sistema reactivo necesita. Esta robustez se pierde cuando se intenta en vez de tener esta jerarquía, ir a un esquema con una mentalidad más tradicional de inyección de dependencias y se cae en la tentación de inyectar actores a otros actores.</p>
<p>Cuando un actor falla y se produce una excepción, su supervisor puede hacer, o bien <strong>reiniciar</strong> el actor, <strong>parar</strong> el actor, <strong>escalar</strong> la excepción o absorber la excepción y <strong>continuar</strong> con la ejecución.</p>
<p>El sistema de supervisión de <em>Akka</em> permite tener la posibilidad de diferente respuesta del supervisor dependiendo del tipo de excepción y si esta afecta a todos los actores supervisados o sólo al que ha fallado. Esto junto con lo anterior permite implementar fácilmente patrones,  por ejemplo de tipo &#8216;<em>circuit breaker</em>&#8216;, si uno de los actores falla.</p>
<p><em>Akka</em> tiene la posibilidad de establecer eventos o disparadores en el ciclo de vida de un actor. Por ejemplo <strong>antes de crearlo</strong>, <strong>antes</strong> y <strong>después</strong> de <strong>reiniciarlo</strong> y cuando se <strong>para</strong>.</p>
<p>Ademas del concepto de supervisión, en <em>Akka</em> existe el de <strong>monitorización</strong>. Cualquier actor, puede &#8216;<em>monitorizar</em>&#8216; a cualquier otro, lo haya creado o no. El primero obtiene un mensaje &#8216;<strong><em>Terminated</em></strong>&#8216; cuando el monitorizado ha terminado. Esto permite modificar su comportamiento o cambiar su estado. En los ejemplos siguientes el actor supervisor también hace de &#8216;<em>monitor</em>&#8216; de sus hijos.</p>
<p>Para poder mostrar con ejemplos como es el comportamiento de las diferentes estrategias a seguir, he creado en el proyecto dos actores: <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummyCheckLifeCycle.java" target="_blank"><strong><em>ActorNoTypedDummyCheckLifeCycle</em></strong></a> y <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLetItCrash.java" target="_blank">ActorNoTypedLetItCrash</a></em></strong>.</p>
<p><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummyCheckLifeCycle.java" target="_blank">ActorNoTypedDummyCheckLifeCycle</a></em> se utiliza para comprobar los eventos que se disparan y por los &#8216;<em>estados</em>&#8216; que pasa un actor cuando es supervisado con diferentes estrategias. Concatena en un atributo &#8216;<em>state</em>&#8216; los diferentes pasos por los &#8216;<em>hooks</em>&#8216; del ciclo de vida de un actor:</p>
<ul>
<li>Método &#8216;<strong><em>aroundPreStart</em></strong>&#8216;: Primer evento que se dispara cuando se inicia un actor. Sólo se ejecuta cuando se inicia un actor por primera vez.</li>
<li>Método &#8216;<strong><em>preStart&#8217;</em></strong>: Se lanzan cuando se inicia un actor o después de que se haya reiniciado.</li>
<li>Método &#8216;<strong><em>aroundPreRestart&#8217;</em></strong>: Cuando un actor va a ser reiniciado, se dispara antes de parada el actor.</li>
<li>Método &#8216;<strong><em>preRestart</em></strong>&#8216;: También se ejecuta antes de parar el actor cuando va a ser reiniciado. La llamada es después de la del método &#8216;<em>aroundPreRestart</em>&#8216;</li>
<li>Método &#8216;<strong><em>postStop</em></strong>&#8216;: Evento que se llama, o bien cuando se para el actor, o bien antes de reiniciarlo (en este último caso justo después de que se llame al método &#8216;<em>preRestart</em>&#8216;)</li>
<li>Método &#8216;<strong><em>postRestart</em></strong>&#8216;: Se lanza después de reiniciar el actor.</li>
<li>Método &#8216;<strong><em>aroundPostStop</em></strong>&#8216;: Se realiza la llamada justo antes de parar definitivamente el actor.</li>
</ul>
<p>El actor <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLetItCrash.java" target="_blank">ActorNoTypedLetItCrash</a></em> es el que creará y hará de supervisor de <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummyCheckLifeCycle.java" target="_blank">ActorNoTypedDummyCheckLifeCycle</a></em>. En su constructor,  permite definir por parámetro la estrategia de supervisión. Su comportamiento será en de hacer de proxy en el envío de mensajes a  <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummyCheckLifeCycle.java" target="_blank">ActorNoTypedDummyCheckLifeCycle</a></em> hasta que este el actor hijo se pare o cuando el mismo se haya reiniciado.</p>
<p>Para mostrar el comportamiento de las diferentes estrategias y cual es el ciclo de vida especifico de los actores (cuando se llama a los diferentes &#8216;<em>hooks</em>&#8216;) he codificado en el proyecto los siguientes ejemplos.</p>
<h3>Estrategia de supervisión por defecto</h3>
<p>Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/supervisorstrategy/ActorLetItCrashTestDefault.java" target="_blank">ActorLetItCrashTestDefault.java</a></em></strong><br />
<pre><em>Comando maven</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.supervisorstrategy.ActorLetItCrashTestDefault test</strong></pre><br />
Si se produce un excepción en un actor hijo, la <strong>estrategia por defecto</strong> en <em>Akka</em> es la de <strong>reiniciar el actor hijo</strong>, excepto si es un error irrecuperable:</p>
<ul>
<li> cuando se ha producido una excepción al inicializar el actor (<strong><em>ActorInitializationException</em></strong>)</li>
<li>cuando ya se había parado el actor(<strong><em>ActorKilledException</em></strong>)</li>
</ul>
<p>Esta estrategia cobra sentido cuando se quiere mantener un sistema estable. La idea subyacente es que cuando se produce un error el sistema debería volver a un estado consistente y esto se consigue reiniciando el estado del actor.</p>
<p>En este ejemplo, los pasos son:</p>
<ol>
<li>Se envía un primer mensaje &#8216;<em>state</em>&#8216; al actor <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLetItCrash.java" target="_blank">ActorNoTypedLetItCrash</a></em>. Este hará el reenvío del mensaje al actor hijo (<em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummyCheckLifeCycle.java" target="_blank">ActorNoTypedDummyCheckLifeCycle</a></em>) que devolverá la concatenación de los diferentes métodos por los que ha pasado hasta ese momento.</li>
<li>Después se envía un mensaje con una excepción para que el actor hijo provoque la excepción.</li>
<li>Por último se vuelve a enviar un mensaje &#8216;<em>state</em>&#8216; para ver por los eventos que se ejecutan cuando se reinicia el actor.</li>
<li>Finalmente para poder ver todo el flujo, se para el actor.</li>
</ol>
<p>El ejemplo permite comprobar el flujo completo del paso de los diferentes eventos a lo largo de la vida del actor hijo. En este caso con la estrategia de supervisión por defecto, es este:<br />
<pre>Se llama al constructor
 =&gt; Llamada a <strong><em>aroundPreStart</em></strong>
  =&gt; Llamada a <strong><em>preStart</em></strong>
   =&gt; [[exception]] Se provoca una excepción
    =&gt; Llamada a <strong><em>aroundPreRestart</em></strong>
     =&gt; Llamada a <strong><em>preRestart</em></strong>
      =&gt; Llamada a <strong><em>postStop</em></strong>
       =&gt; Llamada al constructor (Se vuelve a crear el actor)
        =&gt; Llamada a <em><strong>aroundPostRestart</strong></em>
         =&gt; Llamada a <em><strong>postRestart</strong></em>
          =&gt; Llamada a <em><strong>preStart</strong></em>
           =&gt; Llamada a <em><strong>aroundPostStop</strong></em>
            =&gt; Llamada a <em><strong>postStop</strong></em></pre></p>
<h3>Estrategia de supervisión: Escalar la excepción</h3>
<p>Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/supervisorstrategy/ActorLetItCrashTestEscalate.java" target="_blank">ActorLetItCrashTestEscalate.java</a></em></strong><br />
<pre><em>Commando maven</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.supervisorstrategy.ActorLetItCrashTestEscalate test</strong>

</pre><br />
¿Qué ocurre cuando se elige una estrategia de supervisión de tipo &#8216;<strong><em>escalate</em></strong>&#8216;? En este caso la excepción en el actor hijo provoca el error también en el actor supervisor. El comportamiento final depende entonces de la propia estrategia de supervisión de este último.</p>
<p>El ejemplo puede ayudar a verlo más claro. En este caso se configura el supervisor (<em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLetItCrash.java" target="_blank">ActorNoTypedLetItCrash</a></em>) para que la estrategia de supervisión sea la de <strong>escalar la excepción</strong>. Cuando se provoca una excepción en el actor supervisado, el resultado es el mismo que si se <strong>hubiera producido en el supervisor</strong>.</p>
<p>El este caso el supervisor tiene la estrategia de supervisión por defecto, que lo reinicia, volviéndose a crear el actor hijo.</p>
<p>En el test se comprueba este hecho cuando se valida todo el ciclo de vida del actor hijo. Se arranca y después de la excepción, se para, para después volver a arrancar sin reinicio. Esto último provocado porque al reiniciarse actor supervisor, el hijo se para y se vuelve a crear:<br />
<pre>Llamada a constructor
 =&gt; Llamada a <strong><em>aroundPreStart</em></strong>
  =&gt; Llamada a  <strong><em>preStart</em></strong>
   =&gt; [[exception]] Se provoca una excepción
    =&gt; Llamada a <strong><em>aroundPostStop</em></strong>
     =&gt; Llamada a <strong><em>postStop</em></strong>
      =&gt; Llamada al constructor (Se vuelve a crear el actor)
       =&gt; Llamada a <strong><em>aroundPreStart</em></strong>
        =&gt; Llamada a <strong><em>preStart</em></strong>
        =&gt; Llamada a <strong><em>aroundPostStop</em></strong>
         =&gt; Llamada a <strong><em>postStop</em></strong></pre></p>
<h3>Estrategia de supervisión &#8216;resume&#8217;: &#8216;Absorber&#8217; la excepción.</h3>
<p>Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/supervisorstrategy/ActorLetItCrashTestResume.java" target="_blank">ActorLetItCrashTestResume.java</a></em></strong><br />
<pre><em>Comando maven</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.supervisorstrategy.ActorLetItCrashTestResume test</strong>
</pre><br />
Si el supervisor adopta una estrategia de &#8216;<em>resume</em>&#8216; si se produce un error la excepción no produce ni el reinicio, ni la parada del actor supervisado. Aunque se haya producido el error, sigue levantado a la espera de procesar nuevos mensajes.</p>
<p>El test ayuda a comprender este tipo de supervisión. Se comprueba que cuando se produce una excepción al procesar un mensaje, no se hace <strong>ninguna llamada</strong> a los métodos del ciclo de vida, ni tampoco se escala la excepción. El siguiente mensaje lo procesa correctamente.</p>
<p>El ciclo de vida del actor supervisado con este tipo de supervisión será:<br />
<pre>Llamada a constructor
 =&gt; Llamada a <strong><em>aroundPreStart</em></strong>
  =&gt; Llamada a <strong><em>preStart</em></strong>
   =&gt; [[exception]] Se provoca una excepción
    =&gt; Llamada a <strong><em>aroundPostStop</em></strong>
     =&gt; Llamada a <strong><em>postStop</em></strong></pre></p>
<h3>Estrategia de supervisión &#8216;stop&#8217;: Parar el actor supervisado.</h3>
<p>Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/supervisorstrategy/ActorLetItCrashTestStop.java" target="_blank">ActorLetItCrashTestStop.java</a></em></strong><br />
<pre><em>Comando maven</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.supervisorstrategy.ActorLetItCrashTestStop test</strong></pre><br />
En este caso, se para el actor supervisado cuando al procesar un mensaje ocurre una excepción.</p>
<p>En el ejemplo se fuerza esta situación. Si se provoca una excepción en el actor supervisado se comprueba que el actor no se vuelve a reiniciar. De hecho si se le vuelve a enviar un mensaje de estado, este se envía a la cola de &#8216;<em>Dead Letters</em>&#8216; porque la referencia al actor ya no apunta a un actor válido.</p>
<p>El ciclo de vida del actor es el siguiente:<br />
<pre>Llamada a constructor
 =&gt; Llamada a <strong><em>aroundPreStart</em></strong>
  =&gt; Llamada a  <strong><em>preStart</em></strong>
   =&gt; [[exception]] Se provoca una excepción
    =&gt; Llamada a <strong><em>aroundPostStop</em></strong>
     =&gt; Llamada a <strong><em>postStop</em></strong></pre><br />
Los mismos pasos que con la estrategia &#8216;<em>resume</em>&#8216;. Pero en este caso no ha sido necesario parar el actor en el test porque &#8216;<em>muere</em>&#8216; después de provocarse la excepción.</p>
<h2>Bus de eventos interno de Akka</h2>
<p>Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/bus/PublishSimpleSuscribeTest.java" target="_blank">PublishSimpleSuscribeTest.java</a></em></strong><br />
<pre><em>Comando maven
</em><strong>mvn -Dtest=com.logicaalternativa.examples.akka.bus.PublishSimpleSubcribeTest test</strong>
</pre><br />
<strong><em>Akka</em></strong> poseé un bus interno que permite el envío de mensajes siguiendo el patrón <strong>publicador-suscriptor</strong>. Un &#8216;<em>publicador</em>&#8216; envía un mensaje sin saber quien van a ser los receptores. Los actores que quieran recibir ese tipo de mensajes deberán suscribirse a esa publicación.</p>
<p><img class="alignleft size-full wp-image-952" src="/wp-content/uploads/2015/10/busEvent-peque2.png" alt="[Bus de eventos de Akka]" width="250" height="145" />El paradigma cambia. En vez de enviar un mensaje a un actor concreto, es decir, “<em>(Por favor) haz esto</em>”, cuando se <strong>publica un mensaje en el bus</strong> se está diciendo “<em>(A quien pueda interesar) ha ocurrido esto</em>”</p>
<p>En este caso el ejemplo muestra un uso sencillo del bus de <strong><em>Akka</em></strong> para mostrar este patrón.</p>
<p>Se levantan dos actores suscriptores (del tipo <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLogEvent.java" target="_blank"><em>ActorNoTypedLogEvent</em></a>) que se suscribirán a mensajes de tipo <em>Integer</em>. La implementación de este actor es sencilla: registra los mensajes del tipo a los que está suscrito y si se le envía un mensaje &#8216;<em>lastMessage</em>&#8216; devolverá el último mensaje que ha registrado.</p>
<p>En el test después de levantar a los dos suscriptores se envía un mensaje al bus de <em>Akka</em>. Después se comprueba que el mensaje le ha llegado a ambos.</p>
<h2>Dead letters</h2>
<p>Test: <em><strong><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/bus/DeadLettersTest.java" target="_blank">DeadLettersTest.java</a></strong></em><br />
<pre><em>Comando maven
</em><strong>mvn -Dtest=com.logicaalternativa.examples.akka.bus.DeadLettersTest test</strong></pre><br />
Un &#8216;<strong><em>dead letter</em></strong>&#8216; se produce cuando <strong>no</strong> se ha podido <strong>entregar un mensaje a un actor</strong>. Un caso típico es cuando el actor receptor del mensaje ya no existe. El &#8216;<em>dead letter</em>&#8216; contiene el<strong> mensaje enviado</strong>, la referencia al <strong>actor que lo envía</strong> y la del que <strong>lo iba a recibir</strong>.</p>
<p>Por defecto <em>Akka</em> informa en el log de la aplicación los dead letters que se producen (esto es configurable). También pública esta información <strong>a través del bus de eventos de <em>Akka</em></strong>, lo que permite que una aplicación tenga la posibilidad de una gestión específica de estos mensajes perdidos.</p>
<p>En el ejemplo para poder provocar un <em>dead letter</em> se crea un actor del tipo <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummy.java" target="_blank"><em>ActorNoTypedDummy</em></a> pararlo para a continuación enviarle un mensaje. Este mensaje &#8216;<strong><em>se pierde</em></strong>&#8216; y es recogido como &#8216;<em>dead letter</em>&#8216;.</p>
<p>Por otra parte en el ejemplo se está utilizando un actor del tipo <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLogEvent.java" target="_blank"><em>ActorNoTypedLogEvent</em></a> configurado para que suscriba en el bus de eventos de <em>Akka</em> los mensajes del tipo <strong><em>DeadLetter</em></strong>.</p>
<p>Cuando se manda un mensaje de &#8216;<em>lastMessage</em>&#8216; al actor <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedLogEvent.java" target="_blank"><em>ActorNoTypedLogEvent</em></a> este devolverá la información del mensaje perdido en forma de <em>DeadLetter</em>.</p>
<p>Como comprobación final del test se validará la información contenida en el objeto <strong><em>DeadLetter</em></strong>: el mensaje y la referencia al actor receptor.</p>
<hr />
<p>Hasta aquí este segundo artículo de Akka por ejemplos. El próximo y último artículo de esta serie será sobre <strong>actores tipados</strong>.</p>
<p>Espero que os sirva.</p>
<p><strong><em><a href="/mi-cv/" target="_blank">M.E.</a></em></strong></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/" rel="category tag">Programación</a> y está etiquetada con <a href="/tag/actores/" rel="tag">actores</a>, <a href="/tag/akka/" rel="tag">akka</a>, <a href="/tag/bus-de-eventos/" rel="tag">bus de eventos</a>, <a href="/tag/futuros/" rel="tag">futuros</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/programacion-reactiva/" rel="tag">programación reactiva</a>, <a href="/tag/robustez/" rel="tag">robustez</a> en <a href="/akka-por-ejemplos-sobre-supervision-bus-de-eventos/" title="23:34" rel="bookmark"><time class="entry-date" datetime="2015-10-25T23:34:53+00:00">25 octubre, 2015</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-861" class="post-861 post type-post status-publish format-standard hentry category-java category-programacion tag-actores tag-akka tag-futuros tag-java tag-programacion-reactiva tag-scala">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/akka-por-ejemplos/" rel="bookmark">Akka por ejemplos</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><!--wp_fromhtmlpreview_devfmt--></p>
<p><span style="color: #808080;"><strong>«Akka representa muchos conceptos nuevos que al principio cuesta asimilar. Para poder entenderlo mejor, he ido creando, poco a poco, una serie de ejemplos que me han permitido comprender mejor el paradigma que conlleva.</strong></span></p>
<p><span style="color: #808080;"><strong> <img class="size-full wp-image-866 alignleft" src="/wp-content/uploads/2015/10/akkaExample.png" alt="[Akkapor ejemplos]" width="250" height="94" /></strong></span></p>
<p><span style="color: #808080;"><strong>Este artículo trata sobre esto, intentar tener una prueba de código de cada nuevo concepto que permita ver cual es su comportamiento y función.»</strong></span></p>
<blockquote>
<p style="text-align: right;">Entrada siguiente: <strong><a href="/akka-por-ejemplos-sobre-supervision-bus-de-eventos/">Akka por ejemplos. Sobre supervisión, bus de eventos, &#8230;</a></strong></p>
</blockquote>
<p><strong><em>Akka</em></strong> es un framework basado en el modelo de actores que permite dar solución al problema de la <strong>programación concurrente</strong>. Además de formar parte de Scala de manera nativa existe como librería en Java.</p>
<p>Permite diseñar aplicaciones que sean <strong>escalables horizontalmente</strong> de manera transparente, con alta <strong>toleracia a fallos</strong> y <strong>basada en eventos</strong> que permite cumplir el &#8216;<strong><em><a href="http://www.reactivemanifesto.org/" target="_blank">manifiesto reactivo</a></em></strong>&#8216;.</p>
<p>Este será el primer de una seríe de artículos explicando conceptos clave que se utilizan en <strong>Akka mediante ejemplos</strong>. En esta primera parte trataré como funciona las <strong>colas de mensajes</strong> de un actor, que es un <strong>router</strong> y las diferentes maneras de como se pueden enviar <strong>mensajes entre actores</strong>.</p>
<p>En próximas entregas trataré sobre el sistema de <strong>supervisión de los actores</strong> en <em>Akka</em>, como funciona el<strong> bus de eventos</strong> y que son los <strong>actores tipados</strong>.</p>
<p>Esta entrada es eminentemente práctica, te invito a descargarte el proyecto y a que eches un vistazo y ejecutes los ejemplos. Se entenderá mejor lo que quiero explicar en este artículo. Todo el código fuente relacionado con esta serie de post está disponible en mi repositorio de <strong>GitHub</strong></p>
<p style="text-align: center;"><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures" target="_blank"><img class="alignnone wp-image-432 size-full" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" alt="[Logo GitHub]" width="32" height="32" /></a> <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures" target="_blank">AkkaActorsAndFutures</a></p>
<h2>Sobre los test</h2>
<p>La idea fundamental a la hora de realizar los test ha sido la de realizar implementaciones <em>dummy</em> y &#8216;<em>ad hoc</em>&#8216; y, gracias a ellas, montar test que permitieran ver con facilidad cual es el funcionamiento de la pieza que interesa.</p>
<p>Por otra parte, he buscado que el código incluido en los test puedan servir de ejemplo uando se quiera implementar ese mismo concepto en una aplicación real.</p>
<p>Es por esto por lo que he evitado utilizar el framework de <em>Akka</em> de test &#8216;<em>akka-testkit&#8217;</em> y en algunos momentos puede parecer que me he complicado la vida realizando las validaciones cuando se completan los futuros y utilizando agentes de Akka para compartir estados entre actores.</p>
<p>Mucha de la funcionalidad común a todos los actores, como crear el sistema de actores y métodos de utilidad se ha llevado a test base (<em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/testbase/TestBase.java" target="_blank">TestBase</a></em> y <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/testbase/TestBaseTypedActor.java" target="_blank">TestBaseTypedActor</a></em> ) de los que heredan todos los test.</p>
<h2>Prólogo: Los agentes</h2>
<p>Ya que en los test utilizo <strong>agentes</strong>, antes de entrar a explicar los test, intentaré hacer una breve introdución de lo que es un <strong>agente</strong> en <em>Akka.</em></p>
<p>Un agente de <em>Akka</em> permite almacenar un valor y actualizarlo sin problemas de concurrencia. Tienen la particularidad que la <strong>actualización</strong> se realiza de manera <strong>asíncrona</strong>, pero se puede <strong>leer</strong> el valor de manera <strong>síncrona</strong>.</p>
<p>Su funcionamiento es similar a un mailbox de un actor. Se basa en encolar los nuevos valores de tal manera que el valor interno se va actualizando en orden de llegada. No existe concurrencia y por eso su actualización es asíncrona.</p>
<p>Hay que tener en cuenta que cuando se pide su valor de manera síncrona devuelve el valor &#8216;<em>actual</em>&#8216; no el valor &#8216;<em>futuro</em>&#8216; que tendrá cuando se procesen todos los valores encolados hasta ese momento.</p>
<p>Vamos entonces con los test.</p>
<hr />
<h2>Como funciona la cola de mensajes de un Actor</h2>
<p style="padding-left: 30px;">Test: <em><strong><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/queue/ActorQueueTest.java" target="_blank">ActorQueueTest.java</a></strong></em></p>
<p><pre><em>Commando maven:</em><strong>
mvn  −Dtest=com.logicaalternativa.examples.akka.queue.ActorQueueTest test</strong></pre><br />
<div id="attachment_889" style="width: 140px" class="wp-caption alignright"><img class="wp-image-889 size-full" src="/wp-content/uploads/2015/10/maibox-e1444336153949.png" alt="[Un actor, un mailbox]" width="130" height="156" /><p class="wp-caption-text">Un actor, un mailbox</p></div>El modelo de actores nos asegura que<strong> no puede haber más de una ejecución</strong> concurrente de un actor. Es decir, no puede haber más de un hilo ejecutando el código de actor. Los mensajes que se envían al actor se encolan en su &#8216;<em>inbox</em>&#8216; de tal manera que se ejecutan de uno en uno.</p>
<p>En este ejemplo se está levantando dentro del sistema de actores, un actor del tipo <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummy.java" target="_blank"><em>ActorNoTypedDummy</em></a>. Este tiene una lógica muy sencilla: si se envía un mensaje tipo <em>Long</em> la ejecución se espera los milisegundos indicados en el valor del mensaje. Si el mensaje es de tipo <em>String</em> devuelve un eco del mensaje.</p>
<p>En el test <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/queue/ActorQueueTest.java" target="_blank">ActorQueueTest</a></em> se envía un primer mensaje tipo <em>Long</em> para que se realice una espera y después 10 mensajes de tipo <em>String</em>.</p>
<p>En en la ejecución del test, se puede observar de que aunque se envían todos los mensajes sin esperar la ejecución del actor, en realidad estos se encolan. El actor no procesa el siguiente mensaje hasta que no ha terminado la ejecución anterior.</p>
<p>El resultado es que<strong> los mensajes son procesados por orden de llegada</strong> ya que este actor tiene la implementación por defecto de &#8216;<em>mailbox</em>&#8216; (existen otras implementaciones que permiten prioridades de mensajes). Con lo que realiza la espera del primero de ellos y después el eco del resto.</p>
<p>En este test para comprobar el orden de los mensajes que se están ejecutando en el actor se está utilizando un agente de <em>Akka</em> para guardar el estado de manera asíncrona.  El agente almacena la concatenación de los mensajes tipo cadena que se envían al actor.</p>
<p>Para verificar que el orden de los mensajes enviados es el mismo orden de los mensajes que se han procesado se comprueba que estas dos cadenas son iguales.</p>
<h2>Cómo funciona un Router</h2>
<p style="padding-left: 30px;">Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/queue/ActorQueueRouteRoundRobinTest.java" target="_blank">ActorQueueRouteRoundRobinTest.java</a></em></strong></p>
<p><pre><em>Commando maven</em>
<strong>mvn  −Dtest=com.logicaalternativa.examples.akka.queue.ActorQueueRouteRoundRobinTest test</strong></pre><br />
<em>Akka</em> permite el concepto de &#8216;<strong><em>Router</em></strong>&#8216;. Esto permite asociar en una misma referencia de un actor envolver un grupo de actores del mismo tipo.</p>
<p>Se basa en el mismo concepto que tenemos todos en mente de que es un <em>Router</em>: un frontal al que se envían los mensajes y que se encarga de reenviarlos a sus &#8216;<em>routees</em>&#8216; para que estos los procesen y devolver la respuesta.</p>
<p>Permite un procesamiento en paralelo mayor, al existir más instancias de un actor, pero con la comodidad de tener una referencia única a la que enviar los mensajes.</p>
<p><div id="attachment_896" style="width: 230px" class="wp-caption alignleft"><img class="wp-image-896 size-full" src="/wp-content/uploads/2015/10/router-peque.png" alt="[Concepto de router]" width="220" height="193" /><p class="wp-caption-text">Router</p></div>Cada miembro del router es de hecho un actor y tiene su propia cola. La estrategia del envío de los mensajes a los miembros del enrutador se define al crear este. En el test de ejemplo se está utilizando la estrategia de envío secuencial de mensajes (<em>&#8216;RoundRobinPool&#8217;</em>): se envía un mensaje a un actor del grupo, el siguiente al siguiente actor y así sucesivamente. En la documentación de <em>Akka</em> puedes ver que existen y se pueden utilizar otras estrategias.</p>
<p>El ejemplo levanta un sistema de actores. Se crea un router de 5 actores del tipo <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedWhoIam.java" target="_blank"><em>ActorNoTypedWhoIam</em></a>. Este actor tiene una implementación muy sencilla. Se limita a responder en un <em>Map</em> con el mismo mensaje que le envían y su nombre de actor.</p>
<p>Al router se le envían 10 mensajes. En la resolución de cada futuro de respuesta se comprueba que el mensaje es el mismo que se ha enviado. Por otra parte, gracias a la nombre del <em>routee</em>, se guarda la información de que <em>routee</em> ha procesado el mensaje.</p>
<p>Por último se comprueba que a cada actor del grupo del router le ha llegado el mismo número de mensajes (estrategía de envío <em>RoundRobinPool</em>). En este caso son 2 ya que el router lo forman 5 actores y se mandan 10 mensajes.</p>
<p>En las trazas se puede comprobar que el actor con el nombre &#8216;<em>a</em>&#8216; le llegan los mensajes &#8216;<em>0</em>&#8216; y &#8216;<em>5</em>&#8216;, al &#8216;<em>b</em>&#8216; el &#8216;<em>1</em>&#8216; y el &#8216;<em>6</em>&#8216; y así sucesivamente.</p>
<h2>Como se pueden enviar mensajes entre actores</h2>
<p style="padding-left: 30px;">Test: <strong><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/test/java/com/logicaalternativa/examples/akka/message/ActorProxyTest.java" target="_blank">ActorProxyTest.java</a></em></strong></p>
<p><pre><em>Comando maven</em>
<strong>mvn  -Dtest=com.logicaalternativa.examples.akka.message.ActorProxyTest test</strong></pre><br />
Fundamentalmente los actores se pueden enviar mensajes de dos maneras diferentes: tipo &#8216;<strong><em>fire &amp; forget</em></strong>&#8216; (dispara y olvida) utilizando la función &#8216;<em>tell</em>&#8216; o bien seguir un esquema <strong><em>petición-respuesta</em></strong> utilizando la función &#8216;<em>ask</em>&#8216;.</p>
<p>Por otra parte un actor puede crear otros actores a los que necesita enviar mensajes. Es muy común que existan actores cuya tarea sea la de orquestar o supervisar el trabajo de los actores que ha creado (&#8216;actores hijos&#8217;), y que una parte de esta tarea sea la de reenviar a sus hijos los mensajes que les llegan. Para estos cosos es muy útil utilizar la función &#8216;<em>forward</em>&#8216;</p>
<p>El ejemplo se crea un actor <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedProxy.java" target="_blank">ActorNoTypedProxy</a></em> que crea un actor hijo del tipo <a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummy.java" target="_blank"><em>ActorNoTypedDummy</em></a>. Recordemos que este último devuelve un echo de los mensajes que se le envían.</p>
<p><em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedProxy.java" target="_blank">ActorNoTypedProxy</a></em> hará de proxy para mostrar las diferentes formas de enviar y reenviar mensajes entre actores. Recibe los siguientes mensajes tipo cadena:</p>
<h3>&#8216;<em>forward</em>&#8216;, redirigir el mensaje</h3>
<p><pre><em>Commando maven test 'forward'</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.message.ActorProxyTest#testForward test</strong></pre><br />
Cuando recibe un mensaje de este tipo ejecuta llamada al método &#8216;<em>forward</em>&#8216; del actor hijo, con el mismo mensaje. El actor hijo (<a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummy.java" target="_blank"><em>ActorNoTypedDummy</em></a>) recibirá el mensaje como si el emisor hubiera sido el que emitió el mensaje al actor <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedProxy.java" target="_blank">ActorNoTypedProxy</a></em>.</p>
<h3>&#8216;<em>redirect</em>&#8216; dispara y olvida</h3>
<p><pre><em>Comando maven test redirect</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.message.ActorProxyTest#testRedirectMessageToChild test</strong></pre><br />
El actor que hace de proxy redirecciona el mensaje llamando a la función &#8216;<strong><em>tell</em></strong>&#8216; del hijo indicando que el remitente es el del mensaje original que le llega al proxy. Aquí también el actor hijo (<a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedDummy.java" target="_blank"><em>ActorNoTypedDummy</em></a>) recibirá el mensaje como si el emisor hubiera sido el que emitió el mensaje a <em><a href="https://github.com/logicaalternativa/AkkaActorsAndFutures/blob/master/src/main/java/com/logicaalternativa/examples/akka/ActorNoTypedProxy.java" target="_blank">ActorNoTypedProxy</a></em>.</p>
<div id="attachment_899" style="width: 230px" class="wp-caption aligncenter"><img class="wp-image-899 size-full" src="/wp-content/uploads/2015/10/forward-peque.png" alt="[forward o 'redirect']" width="220" height="128" /><p class="wp-caption-text">forward o &#8216;redirect&#8217;</p></div>
<h3> &#8216;<em>future</em>&#8216;, petición-respuesta no bloqueante y asíncrona</h3>
<p><pre><em>Comando maven test 'future'</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.message.ActorProxyTest#testFutur test</strong></pre><br />
Este es un ejemplo de comportamiento <strong>no bloqueante</strong> y <strong>asíncrono</strong> utilizando los <strong>futuros</strong> de <em><strong>Scala</strong></em> que ofrece <em>Akka</em>. <em>ActorNoTypedProxy</em> utiliza la función &#8216;<em>ask</em>&#8216; para con el mismo mensaje que le ha llegado, preguntar al actor hijo <em>ActorNoTypedDummy</em> y obtener el futuro de la respuesta. Este futuro se envía al remitente del mensaje original.</p>
<p>Al ser este un futuro, si fuera necesario, se puede desde el actor que hace de proxy, operar con él o realizar cualquier tipo de transformación. Por ejemplo se puede registrar un callback, realizar alguna transformación operando con el de manera funcional, etc&#8230;</p>
<p>Para simplificar en el test se espera el resultado de la respuesta y como esta también es un futuro, se espera también a este para obtener el resultado.</p>
<h3> &#8216;<em>await</em>&#8216;, petición-respuesta bloqueante y síncrona</h3>
<p><pre><em>Comando maven test 'await'</em>
<strong>mvn -Dtest=com.logicaalternativa.examples.akka.message.ActorProxyTest#testAwaitFutur test</strong></pre><br />
Sigue el mismo esquema que el test anterior pero esperado la respuesta de una manera <strong>síncrona</strong>.</p>
<p>En el actor proxy realiza la misma llamada &#8216;<em>ask</em>&#8216; y a continuación se utiliza la función &#8216;<em>Await</em>&#8216; que espera la resolución del futuro. Se obtiene así un <strong>comportamiento bloqueante</strong> y <strong>síncrono</strong> de<strong> petición-respuesta</strong>.</p>
<hr />
<p>Hasta aquí llega esta primera parte de esta serie de artículos centrados en explicar como funciona Akka con ejemplos. Conceptos como la <strong>supervisión entre actores</strong>, el <strong>bus de eventos</strong> y que son los <strong>actores tipados</strong> serán material de futuras entregas.</p>
<p>Espero que os sirva.</p>
<p><strong><em><a href="/mi-cv/">M.E.</a></em></strong></p>
<blockquote>
<p style="text-align: right;">Entrada siguiente: <strong><a href="/akka-por-ejemplos-sobre-supervision-bus-de-eventos/">Akka por ejemplos. Sobre supervisión, bus de eventos, &#8230;</a></strong></p>
</blockquote>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/" rel="category tag">Programación</a> y está etiquetada con <a href="/tag/actores/" rel="tag">actores</a>, <a href="/tag/akka/" rel="tag">akka</a>, <a href="/tag/futuros/" rel="tag">futuros</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/programacion-reactiva/" rel="tag">programación reactiva</a>, <a href="/tag/scala/" rel="tag">scala</a> en <a href="/akka-por-ejemplos/" title="20:45" rel="bookmark"><time class="entry-date" datetime="2015-10-12T20:45:56+00:00">12 octubre, 2015</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

		
		</div><!-- #content -->
	</section><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="text-3" class="widget widget_text">			<div class="textwidget"><a href="/feed/" title="Suscribirse a este sitio usando RSS 2.0"><img class="alignnone" alt="[RSS]" src="/wp-content/uploads/2013/04/rss_copy.png" width="20" height="20" /></a>&nbsp;&nbsp;<a href="/feed/" title="Suscribirse a este sitio usando RSS 2.0"><abbr title="Really Simple Syndication">RSS</abbr> de las entradas</a></div>
		</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Entradas recientes</h3>		<ul>
					<li>
				<a href="/charla-en-madridjugmadrid-gug-sobre-tipos-algebraicos-en-java-21/">Charla en MadridJUG/Madrid GUG sobre tipos algebraicos en Java 21</a>
						</li>
					<li>
				<a href="/charla-commit-conf-2023-sobre-programacion-funcional-y-patrones-funcionales/">Charla Commit Conf 2023 sobre programación funcional y patrones funcionales</a>
						</li>
					<li>
				<a href="/notas-sobre-aprendizaje-por-refuerzo/">Notas sobre aprendizaje por refuerzo</a>
						</li>
					<li>
				<a href="/diapositivas-de-la-charla-de-commit-conf/">Vídeo y diapositivas de la charla de Commit Conf</a>
						</li>
					<li>
				<a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/">Futuros y promesas,&#8230; y también monadas. Implementando el patrón</a>
						</li>
				</ul>
		</aside>		<aside id="text-2" class="widget widget_text"><h3 class="widget-title">Sobre el autor</h3>			<div class="textwidget"><a href="/mi-cv"><a href="/mi-cv/#imagenMiCV"><img class="alignright" alt="[Sobre el autor]" src="/wp-content/uploads/2013/04/miguel_p_90x82_claro.jpg" /></a>
<small>Mi nombre es Miguel Rafael Esteban Martín. Llevo más de 20 años trabajando como&nbsp;desarrollador&nbsp; y &nbsp;arquitecto&nbsp; de software en diferentes empresas, lenguajes de programación y plataformas.<br/>
En este blog hablaré sobre programación y tecnología e intentaré hacerlo de manera clara y amena.<br/>
Actualmente trabajando como programador de software en Darwinex.<br/>
Más sobre mi en el enlace <strong><a href="/mi-cv/#imagenMiCV">Mi CV</a></strong></small>

<p style="text-align: center;"><small><strong>Contacto</strong><br/>
<a href="/mi-cv/#email"><img class="alignnone" alt="[correo electrónico]" src="/wp-content/uploads/2013/04/e_mail_p.png" width="32" height="32" /></a><a href="http://es.linkedin.com/in/miguelresteban"><img class="size-full wp-image-25 alignnone" alt="[Perfil en LinkedIn]" src="/wp-content/uploads/2013/04/linkedin.png" width="32" height="32" /></a><a href="https://twitter.com/MiguelREsteban"><img class="size-full wp-image-25 alignnone" alt="[Perfil en Twitter]" src="/wp-content/uploads/2013/04/twitter.png" width="32" height="32" /></a><a href="https://github.com/logicaalternativa"><img class="size-full wp-image-25 alignnone" alt="[Perfil en GitHub]" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" width="32" height="32" /></a>
</small></p></div>
		</aside><aside id="text-8" class="widget widget_text">			<div class="textwidget"> <!-- De aquí -->
    <div id="twitter"></div>    
    <script type="text/javascript" src="/etc/ejemplos/php/twiter-api/js/carga-widget.js.php"></script>
    <!-- hasta aquí --></div>
		</aside><aside id="categories-4" class="widget widget_categories"><h3 class="widget-title">Categorías</h3>		<ul>
	<li class="cat-item cat-item-15"><a href="/category/programacion/android/" >Android</a>
</li>
	<li class="cat-item cat-item-36"><a href="/category/apis/" >APIs</a>
</li>
	<li class="cat-item cat-item-64"><a href="/category/control-de-la-configuracion/" >Control de la configuración</a>
</li>
	<li class="cat-item cat-item-57"><a href="/category/criptografia-y-certificados/" >Criptografía y certificados</a>
</li>
	<li class="cat-item cat-item-98"><a href="/category/programacion/funcional/" title="Programación funcional">Funcional</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/general/" >General</a>
</li>
	<li class="cat-item cat-item-90"><a href="/category/inteligencia-artificial/" >Inteligencia artificial</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/programacion/java/" >Java</a>
</li>
	<li class="cat-item cat-item-8"><a href="/category/programacion/javascript/" >JavaScript</a>
</li>
	<li class="cat-item cat-item-21"><a href="/category/la-nube/" >La Nube</a>
</li>
	<li class="cat-item cat-item-87"><a href="/category/programacion/patrones/" >Patrones</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/programacion/php/" >PHP</a>
</li>
	<li class="cat-item cat-item-100"><a href="/category/presentaciones/" title="Presentaciones en eventos y conferencias">Presentaciones</a>
</li>
	<li class="cat-item cat-item-20"><a href="/category/programacion/" >Programación</a>
</li>
	<li class="cat-item cat-item-105"><a href="/category/programacion/reactiva/" >Reactiva</a>
</li>
	<li class="cat-item cat-item-99"><a href="/category/programacion/scala/" >Scala</a>
</li>
	<li class="cat-item cat-item-16"><a href="/category/sistemas-operativos/" >Sistemas operativos</a>
</li>
		</ul>
</aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
			<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es_ES"><img alt="Licencia de Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Lógica Alternativa</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.logicaalternativa.com/mi-cv/" property="cc:attributionName" rel="cc:attributionURL">Miguel Rafael Esteban Martín</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es_ES">Creative Commons Reconocimiento-NoComercial 3.0 Unported License</a>.		
			<!--
						<a href="https://wordpress.org/" title="Plataforma semántica de publicación personal">Creado con WordPress</a>
			-->
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='/wp-content/themes/twentytwelve/js/navigation.js?ver=20140711'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.7.28'></script>
</body>
</html>
