<!DOCTYPE html>
<!--[if IE 7]>
<html class="ie ie7" lang="es-ES">
<![endif]-->
<!--[if IE 8]>
<html class="ie ie8" lang="es-ES">
<![endif]-->
<!--[if !(IE 7) & !(IE 8)]><!-->
<html lang="es-ES">
<!--<![endif]-->
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width" />
<title>JavaScript | Lógica Alternativa</title>
<link rel="profile" href="http://gmpg.org/xfn/11" />
<link rel="pingback" href="/xmlrpc.php" />
<!--[if lt IE 9]>
<script src="http://localhost/wp-content/themes/twentytwelve/js/html5.js" type="text/javascript"></script>
<![endif]-->
<link rel='dns-prefetch' href='//fonts.googleapis.com' />
<link rel='dns-prefetch' href='//s.w.org' />
<link href='https://fonts.gstatic.com/' crossorigin rel='preconnect' />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; Feed" href="/feed/" />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; RSS de los comentarios" href="/comments/feed/" />
<link rel="alternate" type="application/rss+xml" title="Lógica Alternativa &raquo; JavaScript RSS de la etiqueta" href="/tag/javascript/feed/" />
		<script type="text/javascript">
			window._wpemojiSettings = {"baseUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/72x72\/","ext":".png","svgUrl":"https:\/\/s.w.org\/images\/core\/emoji\/2.3\/svg\/","svgExt":".svg","source":{"concatemoji":"http:\/\/localhost\/wp-includes\/js\/wp-emoji-release.min.js?ver=4.8.20"}};
			!function(t,a,e){var r,i,n,o=a.createElement("canvas"),l=o.getContext&&o.getContext("2d");function c(t){var e=a.createElement("script");e.src=t,e.defer=e.type="text/javascript",a.getElementsByTagName("head")[0].appendChild(e)}for(n=Array("flag","emoji4"),e.supports={everything:!0,everythingExceptFlag:!0},i=0;i<n.length;i++)e.supports[n[i]]=function(t){var e,a=String.fromCharCode;if(!l||!l.fillText)return!1;switch(l.clearRect(0,0,o.width,o.height),l.textBaseline="top",l.font="600 32px Arial",t){case"flag":return(l.fillText(a(55356,56826,55356,56819),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,56826,8203,55356,56819),0,0),e===o.toDataURL())?!1:(l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,57332,56128,56423,56128,56418,56128,56421,56128,56430,56128,56423,56128,56447),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55356,57332,8203,56128,56423,8203,56128,56418,8203,56128,56421,8203,56128,56430,8203,56128,56423,8203,56128,56447),0,0),e!==o.toDataURL());case"emoji4":return l.fillText(a(55358,56794,8205,9794,65039),0,0),e=o.toDataURL(),l.clearRect(0,0,o.width,o.height),l.fillText(a(55358,56794,8203,9794,65039),0,0),e!==o.toDataURL()}return!1}(n[i]),e.supports.everything=e.supports.everything&&e.supports[n[i]],"flag"!==n[i]&&(e.supports.everythingExceptFlag=e.supports.everythingExceptFlag&&e.supports[n[i]]);e.supports.everythingExceptFlag=e.supports.everythingExceptFlag&&!e.supports.flag,e.DOMReady=!1,e.readyCallback=function(){e.DOMReady=!0},e.supports.everything||(r=function(){e.readyCallback()},a.addEventListener?(a.addEventListener("DOMContentLoaded",r,!1),t.addEventListener("load",r,!1)):(t.attachEvent("onload",r),a.attachEvent("onreadystatechange",function(){"complete"===a.readyState&&e.readyCallback()})),(r=e.source||{}).concatemoji?c(r.concatemoji):r.wpemoji&&r.twemoji&&(c(r.twemoji),c(r.wpemoji)))}(window,document,window._wpemojiSettings);
		</script>
		<style type="text/css">
img.wp-smiley,
img.emoji {
	display: inline !important;
	border: none !important;
	box-shadow: none !important;
	height: 1em !important;
	width: 1em !important;
	margin: 0 .07em !important;
	vertical-align: -0.1em !important;
	background: none !important;
	padding: 0 !important;
}
</style>
<link rel='stylesheet' id='cptch_stylesheet-css'  href='/wp-content/plugins/captcha/css/front_end_style.css?ver=4.3.6' type='text/css' media='all' />
<link rel='stylesheet' id='dashicons-css'  href='/wp-includes/css/dashicons.min.css?ver=4.8.20' type='text/css' media='all' />
<link rel='stylesheet' id='cptch_desktop_style-css'  href='/wp-content/plugins/captcha/css/desktop_style.css?ver=4.3.6' type='text/css' media='all' />
<link rel='stylesheet' id='st-widget-css'  href='/wp-content/plugins/share-this/css/style.css?ver=4.8.20' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-fonts-css'  href='https://fonts.googleapis.com/css?family=Open+Sans:400italic,700italic,400,700&#038;subset=latin,latin-ext' type='text/css' media='all' />
<link rel='stylesheet' id='twentytwelve-style-css'  href='/wp-content/themes/twentytwelve/style.css?ver=4.8.20' type='text/css' media='all' />
<!--[if lt IE 9]>
<link rel='stylesheet' id='twentytwelve-ie-css'  href='http://localhost/wp-content/themes/twentytwelve/css/ie.css?ver=20121010' type='text/css' media='all' />
<![endif]-->
<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.12.4'></script>
<script type='text/javascript' src='/wp-includes/js/jquery/jquery-migrate.min.js?ver=1.4.1'></script>
<link rel='https://api.w.org/' href='/wp-json/' />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="/xmlrpc.php?rsd" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="/wp-includes/wlwmanifest.xml" /> 
<meta name="generator" content="WordPress 4.8.20" />

<!-- Bad Behavior 2.2.20 run time: 0.963 ms -->
<script type="text/javascript">
<!--
function bb2_addLoadEvent(func) {
	var oldonload = window.onload;
	if (typeof window.onload != 'function') {
		window.onload = func;
	} else {
		window.onload = function() {
			oldonload();
			func();
		}
	}
}

bb2_addLoadEvent(function() {
	for ( i=0; i < document.forms.length; i++ ) {
		if (document.forms[i].method == 'post') {
			var myElement = document.createElement('input');
			myElement.setAttribute('type', 'hidden');
			myElement.name = 'bb2_screener_';
			myElement.value = '1662399561 127.0.0.1';
			document.forms[i].appendChild(myElement);
		}
	}
});
// --></script>
		<script type='text/javascript' src='/wp-includes/js/jquery/jquery.js?ver=1.2.6'></script>
<script language="JavaScript"><!--
 var DevFmtUrl='http://localhost/wp-content/plugins/devformatter/'; var DevFmtAjaxUrl = 'http://localhost/wp-admin/admin-ajax.php'; //-->
</script>
<script type='text/javascript' src='/wp-content/plugins/devformatter/devfmt_common.js?ver=2015.0.2.1'></script>
<script type='text/javascript' src='/wp-content/plugins/devformatter/devfmt_public.js?ver=2015.0.2.1'></script>
<style type="text/css" media="screen"> @import url( '/wp-content/plugins/devformatter/devfmt_reset.css?ver=2015.0.2.1' ); </style>
<style type="text/css" media="screen"> @import url( '/wp-content/plugins/devformatter/devfmt_css.php?ver=2015.0.2.1' ); </style><script charset="utf-8" type="text/javascript">var switchTo5x=true;</script><script charset="utf-8" type="text/javascript" src="http://w.sharethis.com/button/buttons.js"></script><script type="text/javascript">stLight.options({publisher:'wp.08e04e90-ba64-4016-a864-853c9c560eca'});var st_type='wordpress3.5.1';</script></head>

<body class="archive tag tag-javascript tag-77 custom-font-enabled single-author">
<div id="page" class="hfeed site">
	<header id="masthead" class="site-header" role="banner">
		<hgroup>
			<h1 class="site-title"><a href="/" title="Lógica Alternativa" rel="home">Lógica Alternativa</a></h1>
			<h2 class="site-description">&#039;¿Otro blog de informática? &#8230; Todavía no&#039; .- Cuaderno de bitácora de Miguel R. Esteban</h2>
		</hgroup>

		<nav id="site-navigation" class="main-navigation" role="navigation">
			<button class="menu-toggle">Menú</button>
			<a class="assistive-text" href="#content" title="Ir al contenido">Ir al contenido</a>
			<div class="nav-menu"><ul>
<li ><a href="/">Inicio</a></li><li class="page_item page-item-30"><a href="/mi-cv/">Mi CV</a></li>
<li class="page_item page-item-122"><a href="/mapa-del-sitio/">Mapa del sitio</a></li>
</ul></div>
		</nav><!-- #site-navigation -->

				<a href="/"><img src="/wp-content/uploads/2013/04/cabecera3.jpg" class="header-image" width="960" height="250" alt="Lógica Alternativa" /></a>
			</header><!-- #masthead -->

	<div id="main" class="wrapper">
	<section id="primary" class="site-content">
		<div id="content" role="main">

					<header class="archive-header">
				<h1 class="archive-title">Archivo de la etiqueta: <span>JavaScript</span></h1>

						</header><!-- .archive-header -->

			
	<article id="post-739" class="post-739 post type-post status-publish format-standard hentry category-java category-javascript tag-api tag-java tag-javascript tag-junit tag-maven tag-mock tag-rest tag-spring tag-test">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/mocks-o-el-tdd-y-yo/" rel="bookmark">Mocks&#8230; o el TDD y yo</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<blockquote>
<h1 style="text-align: right;"><em>&#8230; segunda Parte de TDD is dead? … o yo y el TDD</em></h1>
</blockquote>
<p><img src="/wp-content/uploads/2014/10/mockAndTest_p.png" alt="[Mock y test]" width="300" height="294" class="alignright size-full wp-image-780" /><strong>E</strong>ste es el segundo y último artículo de la serie que completa el anterior post <a title="TDD is dead? … o yo y el TDD. Primera Parte" href="/tdd-is-dead-o-yo-y-el-tdd-primera-parte/"><strong>TDD is dead? … o yo y el TDD</strong></a>.</p>
<p>Trataré de explicar como defino y codifico mis propios objetos &#8216;<em>mock</em>&#8216;, y de como los uso tanto para pruebas unitarias, como también en pruebas de integración entre clases.</p>
<p>Y siendo más especifico mostrar como se pueden codificar tres tipos de mock utilizados habitualmente:</p>
<ul>
<li> Simular la <strong>capa de persistencia</strong> a base de datos.</li>
<li> El que se utiliza para <strong>comprobar</strong> que se ha llamado a la <strong>interfaz</strong> que representa desde el objeto que nos interesa probar.</li>
<li>El utilizado simplemente para poder pasar las pruebas y que no nos interesa su comportamiento.</li>
</ul>
<p>Y como dijo el maestro:</p>
<blockquote>
<h1>“&#8230; hablar es barato, vamos a ver un poco de código&#8230;”</h1>
</blockquote>
<h2>Demo</h2>
<p>Para ilustrar el ejemplo utilizaré una aplicación web que mediante un <strong>formulario html</strong> sencillo llamará con <strong>ajax</strong> a un servicio <strong>REST</strong>. Consiste en dar de alta códigos de promoción de una web.</p>
<p><div id="attachment_776" style="width: 460px" class="wp-caption aligncenter"><img src="/wp-content/uploads/2014/10/pantallazoEjemploMock.png" alt="[Pantallazo de la Demo Ejemplo Mock]" width="450" height="251" class="size-full wp-image-776" srcset="/wp-content/uploads/2014/10/pantallazoEjemploMock.png 450w, /wp-content/uploads/2014/10/pantallazoEjemploMock-300x167.png 300w" sizes="(max-width: 450px) 100vw, 450px" /><p class="wp-caption-text">[Pantallado de la demo]</p></div>Los datos que se piden son la promoción, el nombre, el correo electrónico y el código de promoción. Se validará que el correo electrónico no esté ya utilizado y si todo es correcto se enviará el correo a la persona y se mostrarán los datos de los códigos ya dados de alta. </p>
<p>La demo es completamente operativa y se puede usar. Se puede descargar el código aquí:</p>
<p style="text-align: center;"><a title="[MoksExample en GitHub]" href="https://github.com/logicaalternativa/MoksExample" target="_blank"><img class="alignnone wp-image-432 size-full" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" alt="[Logo GitHub]" width="32" height="32" /><strong>MoksExample</strong></a> en GitHub</p>
<p style="text-align: left;">Los detalles de como funciona y como se puede probar están en el archivo <a title="[Detalles de la DEMO en el README.md]" href="https://github.com/logicaalternativa/MoksExample/blob/master/README.md" target="_blank"><strong>README.md</strong></a></p>
<p style="text-align: left;">La parte de servicios REST es Java, montada sobre <strong>Spring</strong>. En el ecosistema de Spring, <strong>Spring-Data</strong> es el mediador con la capa de persistencia de datos. En el ejemplo se usará como interfaz con la base de datos. Como framework de tests unitarios usaré <strong>Junit</strong>. <strong>Maven</strong> será la herramienta de compilación, ejecución de test y construcción del proyecto. Como es una demo para estos fines se usa <strong>Hsqldb</strong>, base de datos en memoria.</p>
<h2>Simular la capa de persistencia de BBDD</h2>
<p style="text-align: left;">En la demo existen dos entidades <em>PROMOTION</em> y <em>PROMOTION_CODE</em>. La primera es el maestro de promociones y en la segunda se almacenarán todos los códigos de promoción relacionados con las primeras. Los objetos de negocio que las definen son los beans: <a title="[Promtion.java]" href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/model/Promotion.java" target="_blank"><strong>Promotion</strong></a> y <a title="[PromotionCode.java]" href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/model/PromotionCode.java" target="_blank"><strong>PromotionCode</strong></a></p>
<p style="text-align: left;"><strong>Spring-Data</strong> se basa en el patrón repositorio. A grandes rasgos y simplificando, Spring-Data implementa la interfaz de las operaciones <em>CRUD</em> y el resto de consultas que se pueden realizar para cada entidad de la capa de persistencia (usualmente una tabla de una base de datos).</p>
<p>Existen por tanto dos interfaces definidos en el pakage <a title="[com.logicaalternativa.ejemplomock.repository] " href="https://github.com/logicaalternativa/MoksExample/tree/master/src/main/java/com/logicaalternativa/ejemplomock/repository" target="_blank"><strong>com.logicaalternativa.ejemplomock.repository</strong></a> cuya misión es definir las operaciones <em>CRUD</em> de las entidades</p>
<ul>
<li><a title="[PromotionRepository.java]" href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/repository/PromotionRepository.java" target="_blank"><strong>PromotionRepository</strong></a> definido para la entidad  <em>PROMOTION</em></li>
<li><a title="[PromotionCodeRepository]" href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/repository/PromotionCodeRepository.java" target="_blank"><strong>PromotionCodeRepository</strong></a> definido para la entidad  <em>PROMOTION_CODE</em></li>
</ul>
<p>En este caso los dos extienden del interfaz de Spring-Data <strong>JpaRepository</strong>.</p>
<p>Con Spring-Data sólo tienes que definir la interfaz con las diferentes operaciones de consulta, inserción y modificación que se van a realizar de la entidad y este se encarga de implementar la interfaz. Esto hace que resulte muy fácil codificar tus propios <em><strong>mocks</strong></em>. Después para los test se inyectarán por inversión de control al objeto de negocio.</p>
<p>Para los test he implementado los dos <em>mock</em> de cada uno de los interfaces. Están en el package <a title="[com.logicaalternativa.ejemplomock.repository.mock]" href="https://github.com/logicaalternativa/MoksExample/tree/master/src/test/java/com/logicaalternativa/ejemplomock/repository/mock" target="_blank"><strong>com.logicaalternativa.ejemplomock.repository.mock</strong></a> .</p>
<ul>
<li><a title="[PromotionRepositoryMock]" href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/repository/mock/PromotionRepositoryMock.java" target="_blank"><strong>PromotionRepositoryMock</strong></a></li>
<li><a title="[PromotionCodeRepositoryMock]" href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/repository/mock/PromotionCodeRepositoryMock.java" target="_blank"><strong>PromotionCodeRepositoryMock</strong></a></li>
</ul>
<p>Las dos clases son muy similares y siguen la misma línea. Sólo se ha implementado las operaciones necesarias para realizar los test. La idea es esa <strong>codificar sólo lo estrictamente necesario</strong>. Se añadirá o se modificará código cuando toque, si para un futuro test es necesario implementar algún otro método más.</p>
<p>Centrándome por ejemplo en el mock <strong>PromotionCodeRepositoryMock</strong>, el &#8216;<em>quid de la cuestión</em>&#8216; está en que he definido un atributo lista de tipo <strong>PromotionCode</strong>.<br />
<!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> PromotionCodeRepositoryMock <span style="color: #000000; font-weight: bold;">implements</span> PromotionCodeRepository <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">   <span style="color: #000000; font-weight: bold;">private</span> List<span style="color: #339933;">&lt;</span>PromotionCode<span style="color: #339933;">&gt;</span> promotionCode<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">4</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Este es accesible mediante los métodos públicos:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> PromotionCodeRepositoryMock <span style="color: #000000; font-weight: bold;">implements</span> PromotionCodeRepository <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #000000; font-weight: bold;">public</span> List<span style="color: #339933;">&lt;</span>PromotionCode<span style="color: #339933;">&gt;</span> getPromotionCode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">4</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">5</td><td class="devcodelinesarea"><pre class="devcode devcodeline">   <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setPromotionCode<span style="color: #009900;">&#40;</span>PromotionCode...<span style="color: #006633;">promotionCode</span><span style="color: #009900;">&#41;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">6</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">7</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>He codificado los métodos <em>CRUD</em> para que operen con esta lista. Por ejemplo, así he codificado el método que sirve para obtener un código de promoción a través de su clave primaria.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> PromotionCodeRepositoryMock <span style="color: #000000; font-weight: bold;">implements</span> PromotionCodeRepository <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> PromotionCode findOne<span style="color: #009900;">&#40;</span> <span style="color: #000000; font-weight: bold;">final</span> <span style="color: #003399;">String</span> email <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span>		</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000066; font-weight: bold;">int</span> index <span style="color: #339933;">=</span> findIndex<span style="color: #009900;">&#40;</span> email <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>		</pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span> index <span style="color: #339933;">!=</span> <span style="color: #339933;">-</span><span style="color: #cc66cc;">1</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      <span style="color: #000000; font-weight: bold;">return</span> clone<span style="color: #009900;">&#40;</span> getPromotionCode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span> index <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> </pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;">&#125;</span>	</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">return</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Que lo que hace es encontrar el índice de la lista de códigos de promoción con el mismo email. Si lo encuentra devuelve una copia de ese objeto. Para entrar más en detalle te invito a revisar los métodos <em><strong>findIndex</strong></em>, <em><strong>clone</strong></em> y el resto de métodos que he implementado de <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/repository/mock/PromotionCodeRepositoryMock.java" title="[PromotionCodeRepositoryMock]"  target="_blank"><strong>PromotionCodeRepositoryMock</strong></a></p>
<p>Otro ejemplo es el método <em><strong>saveAndFlush</strong></em>:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> PromotionCodeRepositoryMock <span style="color: #000000; font-weight: bold;">implements</span> PromotionCodeRepository <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #339933;">&lt;</span>S <span style="color: #000000; font-weight: bold;">extends</span> PromotionCode<span style="color: #339933;">&gt;</span> S saveAndFlush<span style="color: #009900;">&#40;</span>S promotionCode <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span> getPromotionCode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">     <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">promotionCode</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> ArrayList<span style="color: #339933;">&lt;</span>PromotionCode<span style="color: #339933;">&gt;</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">     getPromotionCode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">add</span><span style="color: #009900;">&#40;</span> promotionCode <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">     <span style="color: #000000; font-weight: bold;">return</span> promotionCode <span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">final</span> <span style="color: #003399;">String</span> email <span style="color: #339933;">=</span> promotionCode <span style="color: #339933;">!=</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #339933;">?</span> promotionCode.<span style="color: #006633;">getEmail</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">:</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000066; font-weight: bold;">int</span> index <span style="color: #339933;">=</span> findIndex<span style="color: #009900;">&#40;</span> email <span style="color: #009900;">&#41;</span> <span style="color: #339933;">;</span> </pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">if</span> <span style="color: #009900;">&#40;</span> index <span style="color: #339933;">==</span> <span style="color: #339933;">-</span><span style="color: #cc66cc;">1</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">     getPromotionCode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">add</span><span style="color: #009900;">&#40;</span> promotionCode <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;">&#125;</span> <span style="color: #000000; font-weight: bold;">else</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">     getPromotionCode<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span>.<span style="color: #006633;">set</span><span style="color: #009900;">&#40;</span> index, promotionCode <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">return</span> promotionCode<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">19</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Que busca en la lista el objeto con el mismo email. Si lo encuentra actualiza el objeto de la lista y sino, lo añade a la lista.</p>
<h3>¿Cómo se usa?</h3>
<p>El test <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/rest/bussiness/AddCodeBusinessImpTest.java" title="[AddCodeBusinessImpTest]"  target="_blank"><strong>AddCodeBusinessImpTest</strong></a> prueba el objeto de negocio <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/rest/bussiness/AddCodeBusinessImp.java" title="[AddCodeBusinessImp]" target="_blank"><strong>AddCodeBusinessImp</strong></a>.</p>
<p>La clase de negocio (<strong>AddCodeBusinessImp</strong>) comprueba que existe el código de promoción en la BBDD y utiliza para ello <strong>PromotionRepository</strong>. En el método <em><strong>setUp()</strong></em> del test se inicializa un objeto <strong>PromotionRepositoryMock</strong> con el objeto <strong>Promotion</strong> deseado y este mock se inserta por inversión de control a la instancia de <strong>AddCodeBussinessImp</strong>.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> AddCodeBusinessImpTest <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> AddCodeBusinessImp addCodeBusinessImp<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> PromotionRepositoryMock promotionRepositoryMock<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> PromotionCodeRepositoryMock promotionCodeRepositoryMock<span style="color: #339933;">;</span>	</pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> Promotion promotion<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  @Before</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setUp<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    promotion <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> Promotion<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    promotion.<span style="color: #006633;">setIdPromotion</span><span style="color: #009900;">&#40;</span> <span style="color: #cc66cc;">1</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...    </pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #006633;">promotionRepositoryMock</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> PromotionRepositoryMock<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    promotionRepositoryMock.<span style="color: #006633;">setPromotions</span><span style="color: #009900;">&#40;</span> promotion <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    ...  </pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #006633;">addCodeBusinessImp</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> AddCodeBusinessImp<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    addCodeBusinessImp.<span style="color: #006633;">setPromotionRepository</span><span style="color: #009900;">&#40;</span> promotionRepositoryMock <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">19</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">20</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">21</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">22</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p><em>promotion</em>, <em>promotionRepositoryMock</em>, <em>addCodeBusinessImp</em> son atributos privados de <strong>AddCodeBusinessImpTest</strong>.</p>
<p>Internamente AddCodeBusinessImp llama al método <em>findOne</em> de PromotionRepository con el identificador de la promoción (el del maestro de promociones) del nuevo código que se quiere insertar.</p>
<p>Si queremos testear que ocurre si no encuentra la promoción en la BBDD, simplemente se hace lo que en el método <em><strong>testPromotionNotBbDd</strong></em> de <strong>AddCodeBusinessImpTest</strong>:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> AddCodeBusinessImpTest <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  @Test</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> testPromotionNotBbDd<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">try</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      promotionRepositoryMock.<span style="color: #006633;">setPromotions</span><span style="color: #009900;">&#40;</span> <span style="color: #009900;">&#40;</span> Promotion<span style="color: #009900;">&#091;</span><span style="color: #009900;">&#093;</span> <span style="color: #009900;">&#41;</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span> </pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">      addCodeBusinessImp.<span style="color: #006633;">validateAndAdd</span><span style="color: #009900;">&#40;</span> promotionCode <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      ...</pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Si la lista de promociones en <strong>PromotionRepositoryMock</strong> es nula no se podrá encontrar la promoción (El método <em>findOne</em> devolverá nulo).</p>
<p>En este mismo test también se utiliza <strong>PromotionCodeRepositoryMock</strong>. Inyectado también por inversión de control a la instancia de <strong>AddCodeBusinessImp</strong>, en este caso, sirve para comprobar que se ha insertado el código de promoción. Se hace en el test <em><strong>testOk</strong></em></p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> AddCodeBusinessImpTest <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  @Test</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> testOk<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">try</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      addCodeBusinessImp.<span style="color: #006633;">validateAndAdd</span><span style="color: #009900;">&#40;</span> promotionCode <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">      <span style="color: #000000; font-weight: bold;">final</span> List<span style="color: #339933;">&lt;</span>PromotionCode<span style="color: #339933;">&gt;</span> promotionCodeBbDCodes <span style="color: #339933;">=</span> promotionCodeRepositoryMock.<span style="color: #006633;">getPromotionCode</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      <span style="color: #000066; font-weight: bold;">boolean</span> result <span style="color: #339933;">=</span> promotionCodeBbDCodes <span style="color: #339933;">!=</span> <span style="color: #000066; font-weight: bold;">null</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">                <span style="color: #339933;">&amp;&amp;</span> promotionCodeBbDCodes.<span style="color: #006633;">size</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">==</span> <span style="color: #cc66cc;">1</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">                <span style="color: #339933;">&amp;&amp;</span> promotionCode.<span style="color: #006633;">equals</span><span style="color: #009900;">&#40;</span> promotionCodeBbDCodes.<span style="color: #006633;">get</span><span style="color: #009900;">&#40;</span> <span style="color: #cc66cc;">0</span> <span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">               <span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      ...</pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Para tener una visión más clara de cual es la idea, lo mejor es revisar cada uno de los test <strong>Junit</strong> de <strong><a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/rest/bussiness/AddCodeBusinessImpTest.java" title="[AddCodeBusinessImpTest]" target="_blank">AddCodeBusinessImpTest</a></strong> Creo que puede ser de gran ayuda para tener una visión global de lo que quiero plantear . He intentado que sean claros y autoexplicativos.</p>
<h2>Mock de comprobación de llamada  a interfaz y datos correctos.</h2>
<p>Lo que interesa en este caso es comprobar que un objeto de negocio  hace la llamada a un interfaz con los datos correctos. Lo que se hace es &#8216;<em>mockear</em>&#8216; esa interfaz capturando los datos de la llamada para comprobar después de que estos son correctos.</p>
<p>En la demo existe un objeto de negocio, <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImp.java" title="[SendMailCodePromotionImp]" target="_blank"><strong>SendMailCodePromotionImp</strong></a>, que a partir de una dirección de correo manda el código de promoción por email. Este objeto de negocio realiza internamente una llamada a la interfaz <strong>JavaMailSender</strong> que implementa Spring (<strong>JavaMailSenderImpl</strong>) para enviar el correo electrónico.</p>
<p><a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImp.java" title="[JavaMailServerMock]" target="_blank"><strong>JavaMailServerMock</strong></a>, que implementa también el interfaz <strong>JavaMailServer</strong>, es el <em>mock</em> que va a recoger los datos de la llamada. En este caso sólo me interesaba saber la dirección de correo a la que se envía el correo electrónico. Para ello he implementado el método <em><strong>send</strong></em>:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> JavaMailServerMock <span style="color: #000000; font-weight: bold;">implements</span> JavaMailSender <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> <span style="color: #003399;">String</span> sendTo<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  @Override</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> send<span style="color: #009900;">&#40;</span> MimeMessage mimeMessage <span style="color: #009900;">&#41;</span> <span style="color: #000000; font-weight: bold;">throws</span> MailException <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #003399;">String</span><span style="color: #009900;">&#091;</span><span style="color: #009900;">&#093;</span> to <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">try</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">      to <span style="color: #339933;">=</span> mimeMessage.<span style="color: #006633;">getHeader</span><span style="color: #009900;">&#40;</span><span style="color: #0000ff;">&quot;To&quot;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #009900;">&#125;</span> <span style="color: #000000; font-weight: bold;">catch</span> <span style="color: #009900;">&#40;</span>MessagingException e<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">      logger.<span style="color: #006633;">error</span><span style="color: #009900;">&#40;</span> <span style="color: #0000ff;">&quot;[send] &quot;</span>.<span style="color: #006633;">concat</span><span style="color: #009900;">&#40;</span> e.<span style="color: #006633;">getMessage</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#41;</span>, e <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span>  </pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      to <span style="color: #339933;">=</span> <span style="color: #000066; font-weight: bold;">null</span><span style="color: #339933;">;</span>      </pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    setSendTo<span style="color: #009900;">&#40;</span> to <span style="color: #339933;">!=</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #339933;">&amp;&amp;</span> to.<span style="color: #006633;">length</span> <span style="color: #339933;">&gt;</span> <span style="color: #cc66cc;">0</span> <span style="color: #339933;">?</span> to<span style="color: #009900;">&#091;</span><span style="color: #cc66cc;">0</span><span style="color: #009900;">&#093;</span> <span style="color: #339933;">:</span> <span style="color: #000066; font-weight: bold;">null</span> <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #003399;">String</span> getSendTo<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">return</span> sendTo<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">19</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">20</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setSendTo<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> sendTo<span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">21</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">this</span>.<span style="color: #006633;">sendTo</span> <span style="color: #339933;">=</span> sendTo<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">22</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">23</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Se recoge del argumento de entrada la cabecera “<em>To</em>” para almacenarla en un atributo de la clase.</p>
<h3>¿Cómo se usa?</h3>
<p>En el test <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImpTest.java" title="[SendMailCodePromotionImpTest]" target="_blank"><strong>SendMailCodePromotionImpTest</strong></a> se utiliza este Mock. En el método <em><strong>setUp()</strong></em>, se instancia y se inserta por inversión de control al objeto <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImp.java" title="[SendMailCodePromotionImp]" target="_blank"><strong>SendMailCodePromotionImp</strong></a>.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> SendMailCodePromotionImpTest <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> SendMailCodePromotionImp sendMailCodePromotionImp<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> JavaMailServerMock javaMailServerMock<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  @Before</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setUp<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #006633;">javaMailServerMock</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> JavaMailServerMock<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...    </pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #006633;">sendMailCodePromotionImp</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> SendMailCodePromotionImp<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #006633;">sendMailCodePromotionImp</span>.<span style="color: #006633;">setJavaMailSender</span><span style="color: #009900;">&#40;</span> javaMailServerMock <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">17</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">18</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>El test <em><strong>testOk</strong></em> de <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImpTest.java" title="[SendMailCodePromotionImpTest]" target="_blank"><strong>SendMailCodePromotionImpTest</strong></a> sirve como ejemplo para comprobar si se ha realizado correctamente la llamada:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> SendMailCodePromotionImpTest <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> testOk<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">try</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">      sendMailCodePromotionImp.<span style="color: #006633;">sendMailCodePromotion</span><span style="color: #009900;">&#40;</span> email, locale <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">      <span style="color: #000000; font-weight: bold;">final</span> <span style="color: #003399;">String</span> sendTo <span style="color: #339933;">=</span> javaMailServerMock.<span style="color: #006633;">getSendTo</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">      <span style="color: #000066; font-weight: bold;">boolean</span> res <span style="color: #339933;">=</span> sendTo <span style="color: #339933;">!=</span> <span style="color: #000066; font-weight: bold;">null</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">              <span style="color: #339933;">&amp;&amp;</span> sendTo.<span style="color: #006633;">equals</span><span style="color: #009900;">&#40;</span> nameUser.<span style="color: #006633;">toUpperCase</span><span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #339933;">+</span> <span style="color: #0000ff;">&quot; &lt;&quot;</span> <span style="color: #339933;">+</span> email <span style="color: #339933;">+</span><span style="color: #0000ff;">&quot;&gt;&quot;</span>  <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Donde después de hacer la llamada al método  <em><strong>sendMailCodePromotion</strong></em> del objeto de negocio se obtiene el atributo de <em><strong>sendTo</strong></em> del <em>mock</em> para comprobar que se envía a la misma dirección de correo electrónico.</p>
<p>En este mock sólo se comprueba la cabecera &#8216;<em>To</em>&#8216;. También se podría comprobar el texto del mensaje o cualquier otro dato enviado desde el objeto de negocio.</p>
<h2>Mock para pasar las pruebas</h2>
<p>En la demo he codificado <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/org/springframework/context/mock/MessageSourceMock.java" title="[MessageSourceMock]" target="_blank"><strong>MessageSourceMock</strong></a> que implementa el interfaz <strong>MessageSource</strong>, utilidad que tiene Spring para la internacionalización. Este mock sólo me interesa para poder probar otras funcionalidades. Ha sido necesario codificado porque el objeto de negocio lo necesitaba, pero, en este caso, el resultado de su llamada era irrelevante. Solamente se ha codificado el método <em><strong>getMessage</strong></em> :</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> MessageSourceMock <span style="color: #000000; font-weight: bold;">implements</span> MessageSource <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  @Test</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">4</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #003399;">String</span> getMessage<span style="color: #009900;">&#40;</span><span style="color: #003399;">String</span> arg0, <span style="color: #003399;">Object</span><span style="color: #009900;">&#091;</span><span style="color: #009900;">&#093;</span> arg1, <span style="color: #003399;">Locale</span> arg2<span style="color: #009900;">&#41;</span> <span style="color: #000000; font-weight: bold;">throws</span> NoSuchMessageException <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">5</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #000000; font-weight: bold;">return</span> arg0<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">6</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">7</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">8</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Que como puedes comprobar, devuelve directamente la entrada.</p>
<h3>¿Cómo se usa?</h3>
<p>En el test <a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/test/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImpTest.java" title="[SendMailCodePromotionImpTest]" target="_blank"><strong>SendMailCodePromotionImpTest</strong></a> se utiliza este Mock. En el método <em><strong>setUp()</strong></em>Se instancia y se inserta por inversión de control al objeto<br />
<a href="https://github.com/logicaalternativa/MoksExample/blob/master/src/main/java/com/logicaalternativa/ejemplomock/rest/sender/SendMailCodePromotionImp.java" title="[SendMailCodePromotionImp]" target="_blank"><strong>SendMailCodePromotionImp</strong></a>.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Java"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">01</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000000; font-weight: bold;">class</span> SendMailCodePromotionImpTest <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">02</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">03</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> SendMailCodePromotionImp sendMailCodePromotionImp<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">04</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">05</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">private</span> MessageSourceMock messageSourceMock<span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">06</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines" width="3%">07</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    @Before</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">08</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #000000; font-weight: bold;">public</span> <span style="color: #000066; font-weight: bold;">void</span> setUp<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span> <span style="color: #000000; font-weight: bold;">throws</span> <span style="color: #003399;">Exception</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">09</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">10</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    <span style="color: #006633;">messageSourceMock</span> <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> MessageSourceMock<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">11</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    sendMailCodePromotionImp <span style="color: #339933;">=</span> <span style="color: #000000; font-weight: bold;">new</span> SendMailCodePromotionImp<span style="color: #009900;">&#40;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">12</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">    ...</pre></td></tr><tr><td class="devcodelines" width="3%">13</td><td class="devcodelinesarea"><pre class="devcode devcodeline">    <span style="color: #006633;">sendMailCodePromotionImp</span>.<span style="color: #006633;">setMessageSource</span><span style="color: #009900;">&#40;</span> messageSourceMock <span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">14</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">  <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">15</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  ...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">16</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Ya ahora al hacer la llamada <em><strong>getSendTo</strong></em> del objeto de negocio no aparece la tan temida <strong>NullPointerException</strong> 😉</p>
<h2>Conclusiones</h2>
<p>Como se puede ver, con un poco de ingenio es <strong>relativamente sencillo </strong>crearte tus propios objetos mock sin tener que recurrir a Frameworks. La creación de los mock me ayudan a comprender mejor como funciona la aplicación y ver las clases involucradas como verdaderas cajas negras. Esta es la gracia del paradigma de la orientación a objetos.</p>
<p>No necesariamente tiene que llevar demasiado tiempo el codificarlos. Sólo se debería <strong>&#8216;picar&#8217; lo que necesitas cuando lo necesitas</strong> y mucho es reaprobechable. Al final del proyecto seguro que tienes un buen juego de objetos <em>mock</em> para pruebas.</p>
<p>Otra ventaja, es que no hay reflexión, no existe bbdd en memoria para los test, ni ha sido necesario levantar un entorno para pruebas&#8230; el resultado es que los test van &#8216;<em>volaos</em>&#8216;.</p>
<p><a href="/mi-cv/" title="Mi CV" target="_blank">M.E.</a></p>
<blockquote><p><strong>P.D.</strong>: Para  esta demo, de esto que te vas liando y liando&#8230; y poco a poco me &#8216;currado&#8217; un framework MVC hecho en JavaScript. Cuando lo organice un poco será material para próximos post.</p></blockquote>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/api/" rel="tag">API</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/junit/" rel="tag">junit</a>, <a href="/tag/maven/" rel="tag">maven</a>, <a href="/tag/mock/" rel="tag">Mock</a>, <a href="/tag/rest/" rel="tag">REST</a>, <a href="/tag/spring/" rel="tag">Spring</a>, <a href="/tag/test/" rel="tag">Test</a> en <a href="/mocks-o-el-tdd-y-yo/" title="00:24" rel="bookmark"><time class="entry-date" datetime="2014-10-24T00:24:12+00:00">24 octubre, 2014</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-642" class="post-642 post type-post status-publish format-standard hentry category-control-de-la-configuracion category-java category-javascript tag-ant tag-grunt tag-java tag-javascript">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/aprendiendo-grunt-a-partir-de-ant/" rel="bookmark">Aprendiendo Grunt a partir de Ant</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<h2>Prólogo</h2>
<h3>Hace unos años, unos 8 ya &#8230;</h3>
<p><img class="alignright size-full wp-image-657" src="/wp-content/uploads/2014/05/grunt.png" alt="[Grunt logo]" width="240" height="295" />En un proyecto me tocó realizar una &#8216;<strong>builtool</strong>&#8216;. Era una herramienta común que utilizarían todos los demás proyectos no importando su tecnología, <strong>PHP</strong>,<strong>.Net</strong>, <strong>Java</strong>, etc. Obtenía el código del sistema de control de versiones compilaba, paquetizaba y subía la build compilada a otra rama del control de versiones. En realidad era un pre-Maven porque obligaba a una cierta estructura de directorios en los proyectos pero no tenía ni su control de dependencias, ni sus arquetipos para nuevos proyectos. La herramienta estaba hecha en <strong>Ant</strong>.</p>
<p>Realmente nunca me llegó a apasionar ese proyecto, siempre me ha gustado más programar. Pero me ayudó a tener conciencia de la importancia de saber montar el &#8216;<strong><em>Control de la configuración</em></strong>&#8216; de un proyecto y también, como podéis imaginar, a tener bastante soltura con <strong>Ant</strong>.</p>
<h2>Capitulo I</h2>
<h3>… en la actualidad</h3>
<p>Para el <strong>Front</strong> del nuevo proyecto, con mucha carga de JavaScript, teníamos que generar la build  y realizar el despliegue. Para hacer menos pesada y más rápida la descarga necesitamos comprimir html, jasvascript y css y en el caso de estos dos últimos unificarlos en un sólo fichero.  Este proceso también lo  utilizaríamos para hacer despliegue continuo en nuestro entorno de preproducción, utilizando <strong>Jenkins</strong>.</p>
<p><strong>Grunt</strong> se ajustaba perfectamente a nuestras necesidades y además se unificaba las tecnologías. La elección de Grunt en vez de <strong>Gulp</strong>, otra herramienta similar, fue porque el primero está incluido en <strong>Yeoman</strong>, que viene a ser en Javascript lo que Maven es a Java. Una herramienta de gestión de dependencias, arquetipos, generación de buidls, test, etc.., que al igual que <strong>Maven</strong> permite gestionar todo el ciclo de vida de las builds. Elegí Grunt como un primer paso del camino que muy probablemente nos lleve a Yeoman.</p>
<p>Me enfrente al reto aprendiendo algo nuevo desde la perspectiva de algo conocido. Utilizando como punto de apoyo, sin que lo conocido conllevara  a perjuicios iniciales. Estas son las semejanzas, las diferencias y las conclusiones a las que he llegado.</p>
<h2>En que se parecen&#8230;</h2>
<p><strong>Ant</strong> tiene ya mucho recorrido, o dicho de otra manera ya es bastante &#8216;<em>viejuno</em>&#8216;. En cierta forma fue la respuesta de Java al <strong>Make</strong> de C. Surgió de la necesidad de crear una herramienta que pudiera compilar, generar ejecutables y que no dependiera del sistema operativo donde se ejecutara. Permite también la generación de test, despliegue, generación de documentación, etc.</p>
<p><strong>Grunt</strong> está dentro del ecosistema Javascript, es un &#8216;<strong><em>ejecutor de tareas</em></strong>&#8216; y se usa fundamentalmente para realización de builds, su testeo y su despliegue.</p>
<h3>Arquitectura y configuración</h3>
<p>Para utilizar <strong>Ant</strong> es necesario primero tener instalado <strong>Java</strong> y después la distribución de Ant. Algo similar ocurre con <strong>Grunt</strong> para poder usarlo es requisito tener instalado<strong> node.js</strong> y el cliente de Grunt.</p>
<p>Tanto en Ant como en Grunt la <strong>configuración de la build</strong> del proyecto se hace a través de un archivo. Su nombre por defecto en &#8216;<strong><em>build.xml</em></strong>&#8216; en Ant y &#8216;<strong><em>Gruntfile.js</em></strong>&#8216; en Grunt</p>
<h3>Tareas y objetivos</h3>
<p>En esencia tanto en Ant como en Grunt se utilizan las <strong>tareas</strong> disponibles (&#8216;<em>tasks</em>&#8216;) para definir <strong>objetivos</strong> (&#8216;<em>target</em>&#8216;). Los objetivos contienen la configuración de nuestro proyecto utilizando estas tareas&#8230; &#8216;<em>Copia estos ficheros</em>&#8216;, &#8216;<em>borra los ficheros de este tipo</em>&#8216;, etc..</p>
<p>En <strong>Ant</strong> un <em>target</em> pueden depender de otros. Se ejecutarán los <em>targets</em> de los que depende antes que él y lo harán en el orden indicado. Esto permite crear un flujo de ejecución de tareas.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;project</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;Ejemplo de build&quot;</span> <span style="color: #000066;">default</span>=<span style="color: #ff0000;">&quot;ejecutar&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;target</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;ejecutar&quot;</span> <span style="color: #000066;">depends</span>=<span style="color: #ff0000;">&quot;clean,crearDistro,crearWar&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">4</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines" width="3%">5</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/project<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>En este caso &#8216;<em>ejecutar</em>&#8216; sería el target por defecto.</p>
<p>En <strong>Grunt</strong> se definen &#8216;<em>alias</em>&#8216; para el mismo resultado.</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Javascript"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #660066;">grunt</span>.<span style="color: #660066;">registerTask</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'default'</span><span style="color: #339933;">,</span> <span style="color: #009900;">&#91;</span><span style="color: #3366CC;">'clean'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'copy'</span><span style="color: #339933;">,</span><span style="color: #3366CC;">'uglify'</span><span style="color: #339933;">,</span> <span style="color: #3366CC;">'concat'</span><span style="color: #339933;">,</span><span style="color: #3366CC;">'cssmin'</span><span style="color: #009900;">&#93;</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline">..</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Eso no significa que no puedas ejecutar <em>targets</em><strong> individuales</strong>. Por ejemplo en Ant para lanzar el target <em>clean</em> sería, ejecutando en el directorio donde está el &#8216;<em>build.xml</em>&#8216;</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Bash"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">$ ant clean</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>o en Grunt, ejecutado en el directorio donde está el &#8216;<em>Gruntfile.js</em>&#8216;</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Bash"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">$ grunt clean</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<h4>Variables externas</h4>
<p>Tanto en Ant como en Grunt se pueden <strong>pasar variables</strong> al archivo de configuración <strong>desde línea de comandos</strong>, lo que resulta muy útil a la hora de configurar varios entornos del mismo proyecto en el Jenkins.</p>
<p>En <strong>Ant</strong></p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Bash"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">$ ant −<span style="color: #007800;">DdirEntorno</span>=prepro</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Usando así la variable en el <em>buid.xml</em></p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="XML"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;target</span> <span style="color: #000066;">name</span>=<span style="color: #ff0000;">&quot;clean&quot;</span><span style="color: #000000; font-weight: bold;">&gt;</span></span>	</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;delete</span> <span style="color: #000066;">dir</span>=<span style="color: #ff0000;">&quot;${dirEntorno}&quot;</span><span style="color: #000000; font-weight: bold;">/&gt;</span></span></pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;"><span style="color: #000000; font-weight: bold;">&lt;/target<span style="color: #000000; font-weight: bold;">&gt;</span></span></span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>En Grunt:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Bash"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">$ grunt −−<span style="color: #007800;">dirEntorno</span>=prepro</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Y el Gruntfile.js</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Javascript"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">clean<span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> main<span style="color: #339933;">:</span> <span style="color: #009900;">&#123;</span></pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline">  src<span style="color: #339933;">:</span> <span style="color: #009900;">&#91;</span><span style="color: #3366CC;">'&lt;%= dirEntorno %&gt;'</span><span style="color: #009900;">&#93;</span></pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">4</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"> <span style="color: #009900;">&#125;</span></pre></td></tr><tr><td class="devcodelines" width="3%">5</td><td class="devcodelinesarea"><pre class="devcode devcodeline"><span style="color: #009900;">&#125;</span></pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<h2>… y en que se diferencian</h2>
<h3>Xml o Json/Javascript</h3>
<p><strong>Ant</strong> utiliza <em>xml</em> para definir la configuración. Esto hace que, sobre todo al principio, y con archivos de build complejos, que sea bastante rígido y engorroso.</p>
<p><strong>Grunt</strong> en este aspecto utiliza <em>json</em>, un formato mucho más liviano. Además está embebido en un archivo javascript permitiendo utilizar este lenguaje con toda su potencia. Este aspecto le da mucho más flexibilidad que Ant. Aquí es donde se le notan los años a Ant y como muestra Gant,una alternativa en el mundo Groovy que &#8216;pasa&#8217; del xml</p>
<h3>Gestión de dependencias de las tareas</h3>
<p>La filosofía de las dependencias de las tareas es completamente diferente. Ant ,de serie, trae diferentes tareas que ya se pueden usar. Esto no significa que se puedan utilizar otras tareas de terceros. Para esto se usa la tarea &#8216;<em>typedef</em>&#8216;.</p>
<p>La <strong>gestión de dependencias de las librerías</strong> que son necesarias para ejecutar estar tareas es completamente &#8216;<em>a mano&#8217;</em>. No te queda otra que bajarte la librería he incluirla, o bien en tu distribución de ant (en el directorio <em>&#8216;lib&#8217;</em>) o bien dentro de tu <em>home</em> (en el directorio &#8216;<em>.ant/lib</em>&#8216;)</p>
<p>En esto Grunt si que gana por goleada. Por defecto no viene con ninguna tarea predefinida, por lo que eres el que elige cual vas a utilizar, seleccionandola de su <a title="[Plugins de grunt]" href="http://gruntjs.com/plugins" target="_blank">página de plugins</a>. Probablemente existan varias posibilidades a la tarea que estás buscando. Después, para poder utilizarla, Grunt utiliza la potencia del gestor de paquetes de <strong>node.js</strong>, <strong>npm</strong>.</p>
<p>Por ejemplo, para instalar la tarea &#8216;<em>uglify</em>&#8216; que se utiliza para comprimir archivos js, se ejecuta el siguiente comando en el directorio donde este el <strong>Grutfile.js</strong></p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Bash"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">$ npm <span style="color: #c20cb9; font-weight: bold;">install</span> grunt−contrib−uglify −−save−dev</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Esto incluye las dependencias en el &#8216;<em>package.json</em>&#8216; (Este fichero se crea al iniciar el proyecto ejecutando &#8216;<em>npm init&#8217;</em>)</p>
<p>Y para pode usar la tarea hay que añadir al <strong>Gruntfile.js</strong>:</p>
<p><!--DEVFMTCODE--><pre class="devcodeblock" title="Javascript"><div class="devcodeoverflow"><table class="devcodearea" width="100%"><tr><td class="devcodelines" width="3%">1</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr><tr><td class="devcodelines devcodelinesodd devcodelinesodd" width="3%">2</td><td class="devcodelinesarea devcodelinesareaodd devcodelinesareaodd"><pre class="devcode devcodeline"><span style="color: #660066;">grunt</span>.<span style="color: #660066;">loadNpmTasks</span><span style="color: #009900;">&#40;</span><span style="color: #3366CC;">'grunt−contrib−uglify'</span><span style="color: #009900;">&#41;</span><span style="color: #339933;">;</span></pre></td></tr><tr><td class="devcodelines" width="3%">3</td><td class="devcodelinesarea"><pre class="devcode devcodeline">...</pre></td></tr></table></div></pre><!--END_DEVFMTCODE--></p>
<p>Fácil y cómodo, aunque tampoco falto de problemas. Por ejemplo la tarea <em>clean</em> de repente dejo de funcionar en Windows, mientras que el Linux no había problema. El problema, una de las dependencias subió de versión&#8230; y dejo de funcionar. La solución fue añadir la dependencia a la versión que funcionaba directamente en el archivo &#8216;<em>package.json</em>&#8216;. Espero tener tiempo para explicarlo mejor en otro post.</p>
<h2>Epílogo, Conclusiones</h2>
<p>Si eres de Back ,tienes algo de experiencia en Ant y quieres montar tu control de configuración para el Front que está basado en Javascript, trabajar con &#8216;Grunt&#8217; te va a resultar muy familiar.</p>
<p>Son tecnologías diferentes, algunas tareas serán similares y otras más específicas  no encontrarás en Ant, pero la esencia es la misma, así que sin miedo.</p>
<p>Espero que os sirva.</p>
<p><a title="Mi CV" href="/mi-cv/">M.E.</a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/control-de-la-configuracion/" rel="category tag">Control de la configuración</a>, <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/ant/" rel="tag">ant</a>, <a href="/tag/grunt/" rel="tag">grunt</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a> en <a href="/aprendiendo-grunt-a-partir-de-ant/" title="23:22" rel="bookmark"><time class="entry-date" datetime="2014-05-11T23:22:48+00:00">11 mayo, 2014</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-583" class="post-583 post type-post status-publish format-standard hentry category-java category-javascript tag-concurrencia tag-java tag-javascript tag-vert-x">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/vert-x-mucho-mas-que-trabajar-en-java-como-node-js-y-en-groovy-ruby/" rel="bookmark">Vert.x: Mucho más que trabajar en Java como en node.js.. y en groovy, ruby,&#8230;</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<h1>Prueba de concepto: Gateway con websockets y Gtalk utilizando Vert.x</h1>
<p><img class="alignleft size-full wp-image-602" src="/wp-content/uploads/2014/03/logo-white-big.png" alt="[Vert.x Logo]" width="240" height="72" />La primera vez que oí hablar de <a title="Vert.x" href="http://vertx.io/" target="_blank" rel="noopener"><strong>Vert.x</strong></a> fue en la charla sobre el nuevo lenguaje <a title="Ceylang" href="http://ceylon-lang.org/" target="_blank" rel="noopener">Ceylon</a> basado en la JVM que dio <strong>Gavin King</strong>  (la mente pensante detrás de Hibernate) el pasado febrero en <strong>MadridJUG</strong>. Comentó que para la web estaban enfocando sus esfuerzos en un framework asíncrono basado en <strong>Vert.x</strong>.</p>
<p>«<em>¿Asíncrono&#8230;?»</em> Ya se me levantó la ceja a lo &#8216;Sobera&#8217; .. y lo que me dio ya la puntilla es cuando se puso a picar en directo un servidor web (puro live coding :-)) me olía todo tenía un aire a como se trabaja con <strong>node.js</strong>,.. Así que me dije&#8230;»<em>esto de Vert.x me lo tengo que mirar</em>«.</p>
<p>He de reconocer que con el título del post me he pasado&#8230; He estado dándole vueltas a uno que tuviera &#8216;<em>punch</em>&#8216;&#8230; y me parece que he tirado por lo fácil. En realidad Vert.x es mucho más que un servidor web&#8230; Su &#8216;<em>misión</em>&#8216;, &#8216;<em>visión</em>&#8216; y &#8216;<em>valores</em>&#8216; es soportar <strong>millones</strong> <strong>de</strong> <strong>conexiones concurrentes</strong> usando un número mínimo de hilos del sistema operativo (¿¿?? así lo asegura en su documentación), imposibles en un esquema multihilo típico.</p>
<h2>¿Qué es Vert.x?</h2>
<p>Vert.x es un framework basado en eventos que corre en la máquina virtual de Java. Hecho para que sea fácil de <strong>escalar</strong> y soporte a <strong>tolerancia a fallos</strong>. Pensado para que existan de una manera sencilla varios cores en diferentes JVM y que se intercomuniquen entre ellos. <strong>Vert.x</strong> resuelve la concurrencia siguiendo el <a title="Modelo de actores" href="http://en.wikipedia.org/wiki/Actor_model" target="_blank" rel="noopener"><strong>modelo de actores</strong></a> y además asegura que no existirán bloqueos entre hilos. Otra de sus características es su &#8216;<strong><em>bus de eventos</em></strong>&#8216; que permite desacoplar tu aplicación en módulos y comunicarse entre ellos a través de mensajes. Y todo de manera asíncrona.</p>
<p><strong>Vert.x</strong> es &#8216;<strong><em>Políglota</em></strong>&#8216;, soporta <strong>JavaScript</strong>, <strong>Ruby</strong>, <strong>Groovy</strong>, <strong>Java</strong> o <strong>Python</strong> y con vista a soportar <strong>Scala</strong>, <strong>Clojure</strong> e incluso <strong>PHP</strong>. Ejecuta<strong> código fuente</strong> por lo que, por ejemplo, existe la posibilidad de arrancarlo con ficheros &#8216;.java&#8217; sin necesidad de compilarlos.</p>
<h2>Simple hilo ó multihilo</h2>
<p>Llegaréis a la conclusión y la compartiré de que con el título lo he simplificando demasiado ¿Pero porque he hecho esta comparación? Porqué Node.js y Vert.x tienen funcionamientos similares.</p>
<p>En JavaScript no existe la concurrencia. Aunque esta afirmación pueda ser no del todo cierto, porque en <strong>html5</strong> y en el cliente existe los <strong>workers</strong>, en JavaScript sólo existe un hilo y las operaciones que bloquean se ejecutan con llamadas asíncronas.</p>
<p>Y quizás esto, lo que parece su debilidad, es su virtud es esto lo que hace que node.js este valorado como un servidor con poca latencia cuando existe mucha carga .</p>
<p>La diferencia fundamental entre node.js (o Vert.x) y un sistema tradicional multihilo es que la máquina virtual de node utiliza un sólo hilo para atender todas las peticiones. El hilo se limita a recibir la petición y realizar llamadas asíncronas. No espera el resultado de la petición y continua con la siguiente. Más tarde recogerá el resultado para devolverlo al cliente.</p>
<p>Por el contrario en un sistema multihilo, por ejemplo en un despliegue tradicional de Java, existe un hilo para cada petición. Este se queda bloqueado mientras espera el resultado de una operación. Esto hace que bajo mucha carga existan muchos hilos y parte de ellos esperando, lo que repercute en la latencia.</p>
<p><strong>Vert.x</strong> trabaja de igual manera, en este caso utilizando el modelo de actores en el que cada uno de los actores será un &#8216;<strong><em>verticle</em></strong>&#8216;. En la documentación lo definen con una partícula de Vert.x y en la práctica es la manera de definir el código desplegado. Los &#8216;<em>verticles</em>&#8216; se pueden agrupar en <strong>módulos</strong> (lo más usual cuando la aplicación deja de ser trivial) y estos se pueden reutilizar.</p>
<h2>&#8230;Y la prueba de concepto</h2>
<p>Con Vert.x es muy sencillo crear <strong>servidores</strong> y <strong>clientes</strong> <strong>socket</strong>, <strong>ssl</strong>, <strong>http</strong> y <strong>websocket</strong>.</p>
<p>Necesitaba poder familiarizarme con la herramienta y tenía que hacer algo. Es entonces cuando recordé la presentación y demo muy, muy chula que hizo <strong>Iván</strong> <strong>López</strong> en <strong>MadridGUG</strong> utilizando una cuenta de Gtalk como boot. Así que basándome en esa idea he creado una prueba de concepto realizando un <strong>Gateway con WebSockets y Gtalk utilizando Vert.x</strong>. El proyecto es un proyecto <strong>Java</strong>.</p>
<p>Se utiliza una cuenta de Gtalk para poder crear una sala de chat entre usuarios que se conectan por Gtalk y usuarios que se conectan con un navegador mediante websockets.</p>
<p>Este ejemplo no explota todas las posibilidades  de Vert.x como el escalado y el bus de eventos pero si que despliega servidores web y de websocket. Me ha permitido conocer como se genera, se configura y se ejecuta un módulo. En definitiva, ha conseguido mi objetivo que como he dicho más arriba era familiarizarme con el framework</p>
<p>El proyecto lo he subido a <a title="GitHug de lógica alternativa" href="https://github.com/logicaalternativa" target="_blank" rel="noopener">GitHub</a> y que es lo que hace y como está explicado en el <a href="https://github.com/logicaalternativa/gateway-gtalk-websocket-vertx/blob/master/README.md" target="_blank" rel="noopener">README.md </a>.</p>
<p style="text-align: center;"><a title="Prueba de concepto: Gateway WebSockets y Gtalk utilizando Vert.x" href="https://github.com/logicaalternativa/gateway-gtalk-websocket-vertx" target="_blank" rel="noopener"><img class="size-full wp-image-432 alignnone" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" alt="[Logo GitHub]" width="32" height="32" /></a><a href="https://github.com/logicaalternativa/gateway-gtalk-websocket-vertx" target="_blank" rel="noopener"> Prueba de concepto: Gateway WebSockets y Gtalk utilizando Vert.x</a></p>
<p style="text-align: center;"><a title="Archivo README.md" href="https://github.com/logicaalternativa/gateway-gtalk-websocket-vertx/blob/master/README.md" target="_blank" rel="noopener">README.md</a></p>
<p>Espero que os sirva.</p>
<p><a title="Mi CV" href="/mi-cv/">M.E.</a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/concurrencia/" rel="tag">Concurrencia</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/vert-x/" rel="tag">vert.x</a> en <a href="/vert-x-mucho-mas-que-trabajar-en-java-como-node-js-y-en-groovy-ruby/" title="23:27" rel="bookmark"><time class="entry-date" datetime="2014-03-09T23:27:12+00:00">9 marzo, 2014</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-572" class="post-572 post type-post status-publish format-standard hentry category-javascript tag-angularjs tag-framework tag-javascript">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/mis-primeros-pasos-de-newbie-en-angularjs/" rel="bookmark">Mis primeros pasos de &#8216;newbie&#8217; en AngularJs</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><strong><img class="alignleft size-full wp-image-574" alt="Logo de Angular" src="/wp-content/uploads/2014/01/AngularJS-Shield-large_p.png" width="200" height="211" />A</strong>ctualmente estoy involucrado en un proyecto en el que la arquitectura es un Backend de servicios web Rest (Java) y como Frontend una aplicación de una sola página (SPA Single-page application) hecha en <strong>AngularJs</strong>, utilizando el patrón MVC en el navegador.</p>
<p>Siempre he tenido ganas en saber algo más de como funciona este framework y no podía perder la oportunidad de echar una mano en el Front.</p>
<p>Para poneros en antecedentes, vaya por delante que en mi anterior trabajo apenas se utilizaba JavaScript en la vista. Así que ahí estaba yo, leyendo un manual de AngularJs con muchas ganas, intentando asimilar todos los nuevos conceptos de la herramienta y del lenguaje.</p>
<p>Aquí van mis primeras conclusiones sobre Angularjs de un &#8216;newbie&#8217; que todavía tiene mucho que aprender.</p>
<h2>Single-page application</h2>
<p>La primera y quizás más importante es que me ha encantado el concepto. Te plantea una aplicación web de una manera diferente. Ya no piensas en peticiones web, formularios, etc, sino que piensas en <strong>eventos</strong>.</p>
<p>Al ser una aplicación de una sola página pasas de pensar en una aplicación web al uso a una que se parece más a .NET. La página se carga una vez (index.html) y es Angular quien se encarga según la url (en realidad ficticia con un ancla #) la que carga las diferentes &#8216;plantillas&#8217; (vista, código html parcial) y los diferentes &#8216;controladores&#8217; (funciones javaScript) que hace que se convierta en diferentes &#8216;páginas&#8217;.</p>
<p>No se carga una página por petición por lo que no es necesario guardar variables &#8216;volátiles&#8217; en sesión, simplemente la almacenas en memoria. De hecho nosotros solamente almacenamos en cookies las credenciales de acceso.</p>
<p>A nivel de controlador defines las funciones que responderán a los diferentes eventos. El apretar un botón, un enlace, el cambio de foco de un campo de formulario,etc&#8230; Te centras en programar la lógica del evento, sin preocuparte como propagar el cambio para dibujar el resultado al usuario. De eso se ocupa Angular&#8230;</p>
<h2>Conexión vista-controlador-backend ¿Programación reactiva?</h2>
<p>Dos cosas me han llamado la atención para bien. Primero, la conexión entre la vista y el controlador.</p>
<p>Es directa. Si desde el controlador se cambia una variable esta se propaga directamente en la vista y se produce un cambio en lo que está viendo en usuario. También en el otro sentido, se puede saber cuando se ha modificado una entidad por el usuario y procesar este cambio en el controlador.</p>
<p>Si tenemos en cuenta que los campos de un formulario pueden constituir una entidad en su conjunto, es fácil imaginar lo sencillo que es propagar los cambios también al backend. No se si se puede llamar &#8216;<em>Programación Reactiva</em>&#8216; pero se le parece mucho&#8230; Un cambio realizado por el usuario se puede propagar al backend y un cambio en el backend se puede propagar y que lo vea el usuario.</p>
<h2>Inyección de dependencias</h2>
<p>La segunda es la <strong>inyección de dependencias</strong> que implementa Angular. Una aplicación se divide en módulos y en estos hay controladores, directivas (estas enfocadas más a la vista y a sus validaciones) y servicios. Todas las dependencias, por ejemplo, de un servicio que necesita un controlador, se definen a nivel de módulo de aplicación.</p>
<p>Siguiendo el ejemplo, para poder utilizar el servicio en tu controlador es tan sencillo como tener como argumento&nbsp;en la definición de tu función controlador un objeto servicio. Angular se encarga de instanciar correctamente el servicio que necesita el controlador resolviendo a su vez todas las dependencias.</p>
<p>A nivel de modulo se pueden definir, factorías, servicios y proveedores&#8230; Seguro que quien se han pegado en Java con Spring esto les suena algo&#8230;</p>
<h2>Más cosas</h2>
<p>Angular es un framework muy completo. En el core viene con directivas, filtros, y servicios predefinidos (como su propia implementación del patrón &#8216;<strong><em>promise</em></strong>&#8216; [$q]) que te hace la vida más fácil para un novatillo en el lenguaje y en el concepto como yo.</p>
<p>Tiene &#8216;<em>interceptadores</em>&#8216; que son parecidos a los filtros de Java que te permiten capturar la petición al servidor y por ejemplo enviar las credenciales de conexión sin tener que hacerlo en cada petición.</p>
<p>Angular está orientado a <strong>TDD</strong>. Es sencillo tanto hacer test unitarios como test de integración.</p>
<h2>Conclusiones Pros y Contras</h2>
<h3 style="padding-left: 30px;">Ventajas</h3>
<p style="padding-left: 30px;">En esta fase de aprendizaje Angular me lo ha puesto sencillo. Me ha definido un marco estándar de trabajo y me ha ayudado a no tener la sensación de estar haciendo las cosas no también como debería.</p>
<p style="padding-left: 30px;">Además me he encontrado con que la documentación es buena y en este momento ya hay mucha gente trabajando con él por lo que puedes encontrar solución a casi cualquier problema en Stackoverflow.</p>
<p style="padding-left: 30px;">Otra de las ventajas es su rapidez de ejecución. Las peticiones al servidor son sólo llamadas ajax y plantillas parciales html. Realmente es destacable la rapidez con que se muestran todos los cambios.</p>
<p style="padding-left: 30px;">Este tipo de arquitectura es fácilmente cacheable al ser todo archivos estáticos por lo que la escalabilidad del Front casi deja de ser un problema.</p>
<p style="padding-left: 30px;">Por lo que escrito más arriba. El dinamismo que le da a la web es difícil de superar en otra arquitectura.</p>
<h3 style="padding-left: 30px;">Contras</h3>
<p style="padding-left: 30px;">La dudas que me surgen es que cuando la aplicación empiece a crecer en ficheros js cuanto va a ser de pesada en la primera carga. A lo mejor cuando llegue habrá que plantearse una librería como RequireJs. Por rendimiento realmente no es necesaria, ya que Angular sólo carga en memoria lo que necesita.</p>
<p style="padding-left: 30px;">Otra de las pegas es de usabilidad. Es muy común que en un mismo controlador manejes, por ejemplo, dos formularios y que juegues con su visibilidad para mostrar uno u otro. Si en el proceso el usuario aprieta el botón de &#8216;Atrás&#8217; del navegador lo más probable es que le lleve a una sección de la web que no se corresponde con el anterior paso. Estas cosas hay que tenerlas en cuenta en el diseño de la aplicación.</p>
<p style="padding-left: 30px;">Otro punto a tener en cuenta es a indexación por parte de los buscadores. Al ser todo javaScript y dinámico probablemente Google no podrá indexar la web.</p>
<p style="padding-left: 30px;">El problema de IE8. Es el único navegador que no soporta HTML5 y que actualmente aún lo usa mucha gente, aunque afortunadamente cada vez menos. Para que Angular soporte IE8 hay que hacer &#8216;unas movidas&#8217;, que hace que es mejor plantearse indicar al usuario que utilice otro navegador.</p>
<p style="padding-left: 30px;">Y por último es un cambio de concepto en el diseño de una página web. Por las inercias de las empresas, esto lleva a no pocas reticencias para que alguna se atreva a realizar su proyecto en Angular.</p>
<p>Para una web que siempre requiera un registro, y muy dinámica tipo red social, para mi las ventajas supera con mucho a los inconvenientes.</p>
<p>Espero que os sirva.</p>
<p><a title="Mi CV" href="/mi-cv/">M.E.</a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/angularjs/" rel="tag">AngularJs</a>, <a href="/tag/framework/" rel="tag">Framework</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a> en <a href="/mis-primeros-pasos-de-newbie-en-angularjs/" title="21:51" rel="bookmark"><time class="entry-date" datetime="2014-01-31T21:51:18+00:00">31 enero, 2014</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-555" class="post-555 post type-post status-publish format-standard has-post-thumbnail hentry category-java category-javascript tag-java tag-javascript tag-mvc tag-nosql">
				<header class="entry-header">
			<img width="240" height="102" src="/wp-content/uploads/2014/01/foto.jpg" class="attachment-post-thumbnail size-post-thumbnail wp-post-image" alt="Java versus JavaScript" />
						<h1 class="entry-title">
				<a href="/java-versus-javascript-reflexiones/" rel="bookmark">Java versus JavaScript, reflexiones</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><strong>C</strong>on la aparición de <strong>Node.js</strong> y la posibilidad de programar <strong>JavaScript</strong> en servidor se palpa entre los “<em>javeros</em>” cierta, no se encontrar la palabra, &#8230;¿preocupación?. La sensación es de “<em>&#8230;nos están cambiando el agua&#8230;</em>” y el comentario más oído es “<em>&#8230; parece que es lo que se lleva ahora, no me gusta, pero habrá que aprenderlo&#8230;</em>”</p>
<p>A este desasosiego no ayudan post como los de <strong>PayPal</strong> (<a title="[PayPal se pasa a Node.js]" href="https://www.paypal-engineering.com/2013/11/22/node-js-at-paypal/" target="_blank" rel="noopener">enlace</a> ) en el que en resumen dicen que se pasan a JavaScript entre otras cosas porque es más rápido, necesitan menos gente y además se tira menos código. En respuesta a este post ha habido otros que han salido en defensa de Java y para poner coherencia en el tema (<a title="[Replica al post de Paypal]" href="http://developer-blog.cloudbees.com/2013/12/about-paypal-node-vs-java-fight.html?m=1" target="_blank" rel="noopener">enlace</a>)&#8230; y es que es lo que tienen casi todos los benchmark que pecan de partidistas.</p>
<p>En todas las ingenierías, pero mucho más en informática, tienes que estar en continua formación y estar al tanto de lo que se está haciendo. Es cierto que no podemos negar que también va todo un poco por modas y que es todo es cíclico. Parece que más tarde o más temprano siempre volvemos al mismo sitio que nos estamos moviendo en un circulo cerrado. Yo prefiero verlo más como una espiral&#8230; si la ves verticalmente parece que estás en el mismo punto,&#8230; pero que si la ves horizontalmente te das cuenta que estás en un nivel superior. Un ejemplo de esto son las nuevas bases de datos <strong>NOsql</strong>. Puede parecer que vuelven a las bases de datos pre-relacionales pero en realidad aportan muchas más cosas (escalabilidad, rapidez, big data y su explotación).</p>
<p>Pasa lo mismo con JavaScript hace mucho mucho tiempo que ha dejado de ser un lenguaje que sirve para poco más que hacer validaciones y hacer las “<em>cosas bonitas</em>” en la capa de presentación.</p>
<p>El gran problema de los “javeros” que dan sus primeros pasos en JavaScript, entre los que me incluyo, es que a la hora de enfrentarse al nuevo lenguaje piensan “<em>&#8230; al final será algo como Java, con tipado dinámico y bueno con callbacks..</em>. ” y nada más lejos de la realidad, JavaScript es otra filosofía y en realidad casi casi comparte con Java poco más que el nombre y algunas palabras reservadas.</p>
<p>Creo que en el aprendizaje hay que enfrentarse con una actitud diferente y positiva. Me parece muy interesante el trabajo que ha realizado <strong>Micael Gallego </strong>en su blog (<a title="[Blog Micael Gallego]" href="http://micaelgallego.github.io/blog/Viaje-por-las-tecnologias-de-front-end/" target="_blank" rel="noopener">enlace</a>), en el que explica su viaje en el aprendizaje del lenguaje desde el punto de vista de un programador Java y como a lo largo de los diferentes artículos va entendiendo la filosofía de JavaScript. A mi me ha ayudado mucho su lectura, así que no puedo más que recomendarla.</p>
<p>Reconozco que no soy experto en JavaScript y no puedo opinar en profundidad. Pero desde fuera creo que lo bueno y lo malo de JavaScript es que debido a su dinamismo, se pueden hacer las cosas de varias maneras. En Java por el contrario que es todo más cuadriculado.</p>
<p>De todas maneras creo que lo mejor es ser práctico, intentar conocer las debilidades y las fortalezas de cada lenguaje&#8230; Por ejemplo no me platearía hacer una aplicación de escritorio para Widonws en Java, para eso creo que es mucho mejor .NET. Por la misma razón me encontraría más a gusto, en aplicaciones de Backend en un proyecto con un equipo de trabajo numeroso, en un arquitectura Java que en una JavaScript, ya que al ser Java más “estricto” el código tendería ser más uniforme.</p>
<p>Lo que es cierto es que JavaScript permite hacer nuevas arquitecturas muy escalables y derivando gran parte de la responsabilidades al cliente. <strong>Angular.js</strong> es un framework que sigo muy de cerca. Sé que en algunos aspectos puede ser limitado pero prefiero la seguridad de basarme en algo estándar para montar una arquitectura MVC en el cliente.</p>
<p>Además JavaScript, junto con HTML5 se está convirtiendo en la única opción en la parte de navegador. Debido a las restricciones de seguridad que se están poniendo a los <strong>applets</strong> de java y a las <strong>extensiones</strong> y <strong>plugins</strong>. Son un autentico quebradero de cabeza por los agujeros de seguridad encontrados. Un ejemplo, Firefox a partir de su versión 26 no vienen habilitados por defecto los plugins excepto el de Flash.</p>
<p>Por eso en cosas “<em>especiales</em>” en la capa de cliente que por inercia antes te planteabas hacerlas con un applet o una extensión ahora enfocas tus esfuerzos en hacerlas en JavaScript&#8230; y se pueden hacer cosas muy, muy chulas.</p>
<p>Espero que os sirva.</p>
<p><a title="Mi CV" href="/mi-cv/">M.E.</a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/mvc/" rel="tag">MVC</a>, <a href="/tag/nosql/" rel="tag">NOsql</a> en <a href="/java-versus-javascript-reflexiones/" title="20:21" rel="bookmark"><time class="entry-date" datetime="2014-01-05T20:21:53+00:00">5 enero, 2014</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-380" class="post-380 post type-post status-publish format-standard hentry category-sistemas-operativos tag-html-5 tag-javascript tag-sistemas-operativos-2">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/lineas-generales-del-desarrollo-para-tizen-nuevo-so-enfocado-a-smartphones/" rel="bookmark">Líneas maestras del desarrollo para Tizen, nuevo SO enfocado a Smartphones</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><strong><img class="size-full wp-image-383 alignright" alt="[Logo de tizen]" src="/wp-content/uploads/2013/07/tizen_p.png" width="300" height="102" />Tizen</strong> es un nuevo sistema operativo, que pretende ser global. Su principal objetivo son los Smartphone pero exitirán versiones para PC, para tablets, TV inteligentes e incluso para coches (por cierto este último con muy buena pinta, <a title="[Tizen para coches]" href="http://www.youtube.com/watch?v=HZClYjAxP6Y" target="_blank">ver vídeo</a>)&nbsp;</p>
<p><strong><a title="[Tizen]" href="http://www.tizen.org/">Tizen</a></strong> esta patrocinado y promovido por la <strong>Linux Foundation</strong>. El proyecto es una “<em>join venture</em>” de varias empresas que van desde operadores móviles como <strong>Vodafone</strong> y <strong>Orange</strong>, a fabricantes de dispositivos como <strong>Samsung</strong> e <strong>Intel</strong>. Se ha elegido una forma de gobierno democrático en el que ninguna de las empresas que la forma lleva el peso de las decisiones, aunque eso no significa que cada una de ellas pueda crear sus propios módulos.</p>
<p><strong>Tizen</strong> se fundamenta en estándares y es una plataforma de código abierto basada en <strong>Linux</strong>. Para el desarrollo de aplicaciones se ha elegido <strong>HTML 5</strong> como entorno de desarrollo de sus aplicaciones.&nbsp;</p>
<p>Gracias al Taller de Tizen organizado por <a title="[Madrid JS]" href="http://www.meetup.com/madridjs/" target="_blank"><strong>MadridJS</strong></a> y impartido por <strong>Intel</strong> he podido saber las líneas maestras de su plataforma de desarrollo, <strong>API</strong> y <strong>SDK</strong>.  <a href="/lineas-generales-del-desarrollo-para-tizen-nuevo-so-enfocado-a-smartphones/#more-380" class="more-link">Sigue leyendo <span class="meta-nav">&rarr;</span></a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/sistemas-operativos/" rel="category tag">Sistemas operativos</a> y está etiquetada con <a href="/tag/html-5/" rel="tag">HTML 5</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/sistemas-operativos-2/" rel="tag">sistemas operativos</a> en <a href="/lineas-generales-del-desarrollo-para-tizen-nuevo-so-enfocado-a-smartphones/" title="21:03" rel="bookmark"><time class="entry-date" datetime="2013-07-11T21:03:19+00:00">11 julio, 2013</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-362" class="post-362 post type-post status-publish format-standard hentry category-javascript tag-geolocalizacion tag-javascript tag-mapas tag-openlayers tag-openstreetmap">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/openstreetmap-openlayers-openrouteservice-la-alternativa-a-google-maps/" rel="bookmark">OpenStreetMap-OpenLayers-OpenRouteService la &#8216;alternativa&#8217; a Google Maps</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><b>R</b>ealmente no te das cuenta de la dependencia que tienes de los servicios de Google. Piensas que puedes disponer de ellos porque además de ser potentes son gratis&#8230; hasta que dejan de serlo.</p>
<p><img class="alignleft size-full wp-image-370" alt="[Mapa OpenLayers]" src="/wp-content/uploads/2013/07/mapa.png" width="250" height="124" />Me ha ocurrido en el pasado, en un proyecto personal (<a title="747mx.com" href="http://www.747mx.com/" target="_blank"><strong>747mx.com</strong></a>) que utilizaba el traductor de <strong>Google</strong>. Era gratis hasta un número de peticiones, suficientes para la pretensiones de esa página y pasó a ser de pago desde la primera petición. Algo que no me podía permitir en ese portal.</p>
<p>Así que cuando en una entrevista a <strong>Javier De La Torre</strong> uno de los fundadores de <strong>Vizzuality</strong> señalaba a <strong>OpenStreetMap</strong> como alternativa seria a Google Maps me dije &#8216;<em>… esto me lo tengo que mirar</em>&#8216; .</p>
<p>Para saber como funciona de verdad, lo que me propuse fue migrar un código que tenía con el API de Google Maps en <b>747mx.com</b>. Basarme en él y hacer lo mismo en <a title="OpenStreetMap" href="http://www.openstreetmap.org/" target="_blank"><b>OpenStreetMap</b></a> utilizando lal librería <a title="OpenLayers" href="http://www.openlayers.org/" target="_blank"><b>OpenLayers</b></a> y el servicio de geolocalización de <a title="[OpenRouteService.org]" href="http://www.OpenRouteService.org/"><b>OpenRouteService.org</b>.</a>  <a href="/openstreetmap-openlayers-openrouteservice-la-alternativa-a-google-maps/#more-362" class="more-link">Sigue leyendo <span class="meta-nav">&rarr;</span></a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/geolocalizacion/" rel="tag">Geolocalización</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/mapas/" rel="tag">Mapas</a>, <a href="/tag/openlayers/" rel="tag">OpenLayers</a>, <a href="/tag/openstreetmap/" rel="tag">OpenStreetMap</a> en <a href="/openstreetmap-openlayers-openrouteservice-la-alternativa-a-google-maps/" title="11:32" rel="bookmark"><time class="entry-date" datetime="2013-07-03T11:32:20+00:00">3 julio, 2013</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-133" class="post-133 post type-post status-publish format-standard hentry category-java category-javascript tag-acceso tag-java tag-javascript tag-login tag-securizar tag-sha-1">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/java-securizacion-de-formulario-de-acceso-con-sha-1/" rel="bookmark">(Java) Securización de formulario de acceso con SHA-1</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><img class="alignright size-full wp-image-150" alt="Anonymous_JAVA_p" src="/wp-content/uploads/2013/04/Anonymous_JAVA_p.png" width="138" height="150" /><strong>C</strong>ompletando la <a title="Securización de formulario de acceso con SHA-1" href="/securizacion-de-formulario-de-acceso-con-sha-1/">entrada anterior</a>, he realizado la implementación en <strong>Java</strong>. Básicamente &#8216;<em>todo es lo mismo&#8230; pero no es igual</em>&#8216;&nbsp; :-). Cambia la manera de obtener el <strong>número aleatorio</strong> y la forma de obtener el <strong>sha-1</strong>.</p>
<p>La estructura es la de un proyecto <strong>Maven</strong> web con su <a href="https://github.com/logicaalternativa/ejemplosJava/blob/master/loginsha1/pom.xml" target="_blank">pom.xml</a> para que sea sencillo compilarlo y generar el war. Paso a explicarlo.&nbsp; <a href="/java-securizacion-de-formulario-de-acceso-con-sha-1/#more-133" class="more-link">Sigue leyendo <span class="meta-nav">&rarr;</span></a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/java/" rel="category tag">Java</a>, <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a> y está etiquetada con <a href="/tag/acceso/" rel="tag">acceso</a>, <a href="/tag/java/" rel="tag">Java</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/login/" rel="tag">login</a>, <a href="/tag/securizar/" rel="tag">securizar</a>, <a href="/tag/sha-1/" rel="tag">SHA-1</a> en <a href="/java-securizacion-de-formulario-de-acceso-con-sha-1/" title="21:29" rel="bookmark"><time class="entry-date" datetime="2013-04-28T21:29:17+00:00">28 abril, 2013</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

	<article id="post-68" class="post-68 post type-post status-publish format-standard hentry category-javascript category-php tag-acceso tag-javascript tag-login tag-php tag-securizar tag-sha-1">
				<header class="entry-header">
			
						<h1 class="entry-title">
				<a href="/securizacion-de-formulario-de-acceso-con-sha-1/" rel="bookmark">Securización de formulario de acceso con SHA-1</a>
			</h1>
								</header><!-- .entry-header -->

				<div class="entry-content">
			<p><img class="alignleft size-full wp-image-69" alt="sha1" src="/wp-content/uploads/2013/04/sha1.png" width="150" height="125" /><strong>M</strong>uchas veces las aplicaciones web no tienen acceso por ssl (https) y suelen tener <strong>un formulario de &#8216;login&#8217; de usuario y contraseña</strong>.</p>
<p>Esto quiere decir que información sensible como la contraseña se transmite en texto claro y que sea relativamente fácil que terceros pueden tener acceso a ella. Por ejemplo esnifando el tráfico si el usuario se conecta con una wifi abierta.</p>
<p>Lo que presento a continuación es una manera sencilla de securizar la contraseña utilizando el algoritmo hash <strong>sha-1</strong>. Por simplicidad este ejemplo lo he hecho en <strong>PHP</strong>, pero no tiene complicación hacerlo en <a title="(Java) Securización de formulario de acceso con SHA-1" href="/java-securizacion-de-formulario-de-acceso-con-sha-1/"><strong>Java</strong></a>. He utilizado también la librería de javaScript <strong>PHP.js</strong> que no conocía pero &#8216;<em>me ha gustado su lógica</em>&#8216; 🙂</p>
<p>Bueno este es el problema y esta es la solución que propongo. Al lío&#8230; <a href="/securizacion-de-formulario-de-acceso-con-sha-1/#more-68" class="more-link">Sigue leyendo <span class="meta-nav">&rarr;</span></a></p>
					</div><!-- .entry-content -->
		
		<footer class="entry-meta">
			Esta entrada se publicó en <a href="/category/programacion/javascript/" rel="category tag">JavaScript</a>, <a href="/category/programacion/php/" rel="category tag">PHP</a> y está etiquetada con <a href="/tag/acceso/" rel="tag">acceso</a>, <a href="/tag/javascript/" rel="tag">JavaScript</a>, <a href="/tag/login/" rel="tag">login</a>, <a href="/tag/php/" rel="tag">PHP</a>, <a href="/tag/securizar/" rel="tag">securizar</a>, <a href="/tag/sha-1/" rel="tag">SHA-1</a> en <a href="/securizacion-de-formulario-de-acceso-con-sha-1/" title="12:06" rel="bookmark"><time class="entry-date" datetime="2013-04-19T12:06:10+00:00">19 abril, 2013</time></a><span class="by-author"> por <span class="author vcard"><a class="url fn n" href="/author/miguel/" title="Ver todas las entradas de Miguel R. Esteban Martín" rel="author">Miguel R. Esteban Martín</a></span></span>.								</footer><!-- .entry-meta -->
	</article><!-- #post -->

		
		</div><!-- #content -->
	</section><!-- #primary -->


			<div id="secondary" class="widget-area" role="complementary">
			<aside id="text-3" class="widget widget_text">			<div class="textwidget"><a href="/feed/" title="Suscribirse a este sitio usando RSS 2.0"><img class="alignnone" alt="[RSS]" src="/wp-content/uploads/2013/04/rss_copy.png" width="20" height="20" /></a>&nbsp;&nbsp;<a href="/feed/" title="Suscribirse a este sitio usando RSS 2.0"><abbr title="Really Simple Syndication">RSS</abbr> de las entradas</a></div>
		</aside>		<aside id="recent-posts-2" class="widget widget_recent_entries">		<h3 class="widget-title">Entradas recientes</h3>		<ul>
					<li>
				<a href="/notas-sobre-aprendizaje-por-refuerzo/">Notas sobre aprendizaje por refuerzo</a>
						</li>
					<li>
				<a href="/diapositivas-de-la-charla-de-commit-conf/">Diapositivas de la charla de Commit Conf</a>
						</li>
					<li>
				<a href="/futuros-y-promesas-y-tambien-monadas-implementando-el-patron/">Futuros y promesas,&#8230; y también monadas. Implementando el patrón</a>
						</li>
					<li>
				<a href="/akka-por-ejemplos-actores-tipados/">Actores tipados, Akka por ejemplos</a>
						</li>
					<li>
				<a href="/akka-por-ejemplos-sobre-supervision-bus-de-eventos/">Akka por ejemplos. Sobre supervisión, bus de eventos, &#8230;</a>
						</li>
				</ul>
		</aside>		<aside id="text-2" class="widget widget_text"><h3 class="widget-title">Sobre el autor</h3>			<div class="textwidget"><a href="/mi-cv"><a href="/mi-cv/#imagenMiCV"><img class="alignright" alt="[Sobre el autor]" src="/wp-content/uploads/2013/04/miguel_p_90x82_claro.jpg" /></a>
<small>Mi nombre es Miguel Rafael Esteban Martín. Llevo más de 20 años trabajando como&nbsp;desarrollador&nbsp; y &nbsp;arquitecto&nbsp; de software en diferentes empresas, lenguajes de programación y plataformas.<br/>
En este blog hablaré sobre programación y tecnología e intentaré hacerlo de manera clara y amena.<br/>
Actualmente trabajando como programador de software en Darwinex.<br/>
Más sobre mi en el enlace <strong><a href="/mi-cv/#imagenMiCV">Mi CV</a></strong></small>

<p style="text-align: center;"><small><strong>Contacto</strong><br/>
<a href="/mi-cv/#email"><img class="alignnone" alt="[correo electrónico]" src="/wp-content/uploads/2013/04/e_mail_p.png" width="32" height="32" /></a><a href="http://es.linkedin.com/in/miguelresteban"><img class="size-full wp-image-25 alignnone" alt="[Perfil en LinkedIn]" src="/wp-content/uploads/2013/04/linkedin.png" width="32" height="32" /></a><a href="https://twitter.com/MiguelREsteban"><img class="size-full wp-image-25 alignnone" alt="[Perfil en Twitter]" src="/wp-content/uploads/2013/04/twitter.png" width="32" height="32" /></a><a href="https://github.com/logicaalternativa"><img class="size-full wp-image-25 alignnone" alt="[Perfil en GitHub]" src="/wp-content/uploads/2013/09/GitHub-Mark-32px.png" width="32" height="32" /></a>
</small></p></div>
		</aside><aside id="text-8" class="widget widget_text">			<div class="textwidget"> <!-- De aquí -->
    <div id="twitter"></div>    
    <script type="text/javascript" src="/etc/ejemplos/php/twiter-api/js/carga-widget.js.php"></script>
    <!-- hasta aquí --></div>
		</aside><aside id="categories-4" class="widget widget_categories"><h3 class="widget-title">Categorías</h3>		<ul>
	<li class="cat-item cat-item-15"><a href="/category/programacion/android/" >Android</a>
</li>
	<li class="cat-item cat-item-36"><a href="/category/apis/" >APIs</a>
</li>
	<li class="cat-item cat-item-64"><a href="/category/control-de-la-configuracion/" >Control de la configuración</a>
</li>
	<li class="cat-item cat-item-57"><a href="/category/criptografia-y-certificados/" >Criptografía y certificados</a>
</li>
	<li class="cat-item cat-item-10"><a href="/category/general/" >General</a>
</li>
	<li class="cat-item cat-item-90"><a href="/category/inteligencia-artificial/" >Inteligencia artificial</a>
</li>
	<li class="cat-item cat-item-14"><a href="/category/programacion/java/" >Java</a>
</li>
	<li class="cat-item cat-item-8"><a href="/category/programacion/javascript/" >JavaScript</a>
</li>
	<li class="cat-item cat-item-21"><a href="/category/la-nube/" >La Nube</a>
</li>
	<li class="cat-item cat-item-87"><a href="/category/programacion/patrones/" >Patrones</a>
</li>
	<li class="cat-item cat-item-3"><a href="/category/programacion/php/" >PHP</a>
</li>
	<li class="cat-item cat-item-20"><a href="/category/programacion/" >Programación</a>
</li>
	<li class="cat-item cat-item-16"><a href="/category/sistemas-operativos/" >Sistemas operativos</a>
</li>
		</ul>
</aside>		</div><!-- #secondary -->
		</div><!-- #main .wrapper -->
	<footer id="colophon" role="contentinfo">
		<div class="site-info">
			<a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es_ES"><img alt="Licencia de Creative Commons" style="border-width:0" src="http://i.creativecommons.org/l/by-nc/3.0/88x31.png" /></a><br /><span xmlns:dct="http://purl.org/dc/terms/" property="dct:title">Lógica Alternativa</span> by <a xmlns:cc="http://creativecommons.org/ns#" href="http://www.logicaalternativa.com/mi-cv/" property="cc:attributionName" rel="cc:attributionURL">Miguel Rafael Esteban Martín</a> is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-nc/3.0/deed.es_ES">Creative Commons Reconocimiento-NoComercial 3.0 Unported License</a>.		
			<!--
						<a href="https://wordpress.org/" title="Plataforma semántica de publicación personal">Creado con WordPress</a>
			-->
		</div><!-- .site-info -->
	</footer><!-- #colophon -->
</div><!-- #page -->

<script type='text/javascript' src='/wp-content/themes/twentytwelve/js/navigation.js?ver=20140711'></script>
<script type='text/javascript' src='/wp-includes/js/wp-embed.min.js?ver=4.8.20'></script>
</body>
</html>
